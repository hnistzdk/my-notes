---
title: 常用软件安装
date: 2022-06-06 14:39:00
permalink: /Docker/softwareInstall
categories:
  - 工具部署
  - Docker
tags:
  - Docker
---

## 安装Tomcat

拉取9.0.63

```sh
docker pull tomcat:9.0.63-jdk8-openjdk-slim
```

启动容器

```sh
[root@localhost ~]# docker run -d -p 8080:8080 --name tomcat9 tomcat:9.0.63-jdk8-openjdk-slim 
aa1bff62aa568887cd8611c4922a1ba8cd415c221cd7577af7c5ba3dce0e6935
```

进入容器 把webapp.dist中的文件复制到webapp中

```sh
[root@localhost ~]# docker exec -it aa1bff62aa568887cd8611c4922a1ba8cd415c221cd7577af7c5ba3dce0e6935 /bin/bash
root@aa1bff62aa56:/usr/local/tomcat# ls
BUILDING.txt     LICENSE  README.md      RUNNING.txt  conf  logs            temp     webapps.dist
CONTRIBUTING.md  NOTICE   RELEASE-NOTES  bin          lib   native-jni-lib  webapps  work
root@aa1bff62aa56:/usr/local/tomcat# cp -r webapps.dist/* webapps
root@aa1bff62aa56:/usr/local/tomcat# cd webapps
root@aa1bff62aa56:/usr/local/tomcat/webapps# ls
ROOT  docs  examples  host-manager  manager
```

再访问，就不是404了



## 安装MySQL

### 简单版

拉取

```sh
docker pull mysql:8.0.25
```

启动

```sh
[root@localhost ~]# docker run -p 33066:3306 -e MYSQL_ROOT_PASSWORD=root -d mysql:8.0.25 
6fa14e9ba3b17e0507d911636e76093c2c5c03ad62f163b9886a5b3315176379
```

![image-20220606151606202](https://images.zaiolos.top/images/image-20220606151606202.png)

进入容器

```sh
[root@localhost ~]# docker exec -it 6fa14e9ba3b1 /bin/bash
```

连接上mysql

```sh
mysql -u root -p 输入上面的密码
```

成功进入

![image-20220606151752901](https://images.zaiolos.top/images/image-20220606151752901.png)

建数据库建表测试

```sh
mysql> create database test;
Query OK, 1 row affected (0.00 sec)
mysql> use test
Database changed
mysql> create table test(id int,name varchar(20));
Query OK, 0 rows affected (0.03 sec)

mysql> insert into test values(1,'test');
Query OK, 1 row affected (0.01 sec)

mysql> select * from test;
+------+------+
| id   | name |
+------+------+
|    1 | test |
+------+------+
1 row in set (0.00 sec)
```



### 挂载数据卷版

运行容器并挂载数据卷

```sh
docker run -d -p 33066:3306 --privileged=true -v /zdkuse/mysql/log:/var/log/mysql -v /zdkuse/mysql/data:/var/lib/mysql -v /zdkuse/mysql/conf:/etc/mysql.conf.d -e MYSQL_ROOT_PASSWORD=root --name newmysql mysql:8.0.25
```



新建my.cnf文件

```sh
cd /zdkuse/mysql/conf
vim my.cnf
```

```
[client]
default_character_set=utf8mb4
[mysqld]
collation_server = utf8mb4_general_ci
character_set_server = utf8mb4
```



## 安装Redis

拉镜像

```sh
docker pull redis:6.0.8
```

运行进入

```sh
[root@localhost /]# docker run -d -p 6378:6379 redis:6.0.8 
70c5f0ead50d60957fb1478c2281a6d11da6687ac4656f6cb59f662b36e0bf73
[root@localhost /]# docker exec -it 70c5f0ead50d60957fb1478c2281a6d11da6687ac4656f6cb59f662b36e0bf73 /bin/bash
root@70c5f0ead50d:/data# 
```



将一个模板redis.conf拷贝到数据卷本机目录下

```sh
文件为 /zdkuse/redis/redis.conf
```

修改内容

> requirepass 密码
>
> 注释掉 # bind 127.0.0.1
>
> 将daemonize yes注释起来或者 daemonize no设置，因为该配置和docker run中-d参数冲突，会导致容器一直启动失败
>
> 开启redis数据持久化 appendonly yes 可选



运行

```sh
docker run -p 6378:6379 --name myredis --privileged=true -v /zdkuse/redis/redis.conf:/etc/redis/redis.conf -v /zdkuse/redis/data:/data -d redis:6.0.8 redis-server /etc/redis/redis.conf
```

注意，这里有大坑，redis.conf这个文件，不能有空行的" "空格，否则运行报错

[正确文件链接](https://cloud.zaiolos.top/s/XjTO)


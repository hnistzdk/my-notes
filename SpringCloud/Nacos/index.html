<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nacos | DK&#39;s Notes</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/my-notes/img/logo.jpg">
    <link rel="stylesheet" href="/my-notes//at.alicdn.com/t/font_3334662_k54hl9700p.css">
    <link rel="stylesheet" href="/my-notes//at.alicdn.com/t/font_3334662_k54hl9700p.css">
    <link rel="stylesheet" href="/my-notes//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <link rel="stylesheet" href="/my-notes//at.alicdn.com/t/font_3334691_b03dsaqrwck.css">
    <meta name="description" content="æ—¶ä¸æˆ‘å¾…ï¼Œèˆæˆ‘å…¶è°">
    <meta name="keywords" content="Java">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/my-notes/assets/css/0.styles.565c6041.css" as="style"><link rel="preload" href="/my-notes/assets/js/app.7f931ee0.js" as="script"><link rel="preload" href="/my-notes/assets/js/2.e52a17f8.js" as="script"><link rel="preload" href="/my-notes/assets/js/139.068ed7d7.js" as="script"><link rel="preload" href="/my-notes/assets/js/8.c2fa6f68.js" as="script"><link rel="preload" href="/my-notes/assets/js/6.bcc16901.js" as="script"><link rel="prefetch" href="/my-notes/assets/js/10.fee8f7ec.js"><link rel="prefetch" href="/my-notes/assets/js/100.9be19fac.js"><link rel="prefetch" href="/my-notes/assets/js/101.9aaae740.js"><link rel="prefetch" href="/my-notes/assets/js/102.a72c0165.js"><link rel="prefetch" href="/my-notes/assets/js/103.d47527c3.js"><link rel="prefetch" href="/my-notes/assets/js/104.d5bae560.js"><link rel="prefetch" href="/my-notes/assets/js/105.fdb07f67.js"><link rel="prefetch" href="/my-notes/assets/js/106.b89b7d37.js"><link rel="prefetch" href="/my-notes/assets/js/107.a9d142eb.js"><link rel="prefetch" href="/my-notes/assets/js/108.1b8c8817.js"><link rel="prefetch" href="/my-notes/assets/js/109.0cd465a0.js"><link rel="prefetch" href="/my-notes/assets/js/11.75b40e53.js"><link rel="prefetch" href="/my-notes/assets/js/110.4c56723c.js"><link rel="prefetch" href="/my-notes/assets/js/111.12b9cb85.js"><link rel="prefetch" href="/my-notes/assets/js/112.3f791546.js"><link rel="prefetch" href="/my-notes/assets/js/113.d9998b70.js"><link rel="prefetch" href="/my-notes/assets/js/114.faf0da70.js"><link rel="prefetch" href="/my-notes/assets/js/115.35d9b5f6.js"><link rel="prefetch" href="/my-notes/assets/js/116.13fbe1ab.js"><link rel="prefetch" href="/my-notes/assets/js/117.bffe4459.js"><link rel="prefetch" href="/my-notes/assets/js/118.eabefad3.js"><link rel="prefetch" href="/my-notes/assets/js/119.8593c8a5.js"><link rel="prefetch" href="/my-notes/assets/js/12.34db197a.js"><link rel="prefetch" href="/my-notes/assets/js/120.f5b73620.js"><link rel="prefetch" href="/my-notes/assets/js/121.d3137f51.js"><link rel="prefetch" href="/my-notes/assets/js/122.f47bca90.js"><link rel="prefetch" href="/my-notes/assets/js/123.6d846b88.js"><link rel="prefetch" href="/my-notes/assets/js/124.49825ebc.js"><link rel="prefetch" href="/my-notes/assets/js/125.6d3a9ce5.js"><link rel="prefetch" href="/my-notes/assets/js/126.eeef761b.js"><link rel="prefetch" href="/my-notes/assets/js/127.0f7e28c1.js"><link rel="prefetch" href="/my-notes/assets/js/128.4a35f42a.js"><link rel="prefetch" href="/my-notes/assets/js/129.e364bc33.js"><link rel="prefetch" href="/my-notes/assets/js/13.ab02aa59.js"><link rel="prefetch" href="/my-notes/assets/js/130.1299fc06.js"><link rel="prefetch" href="/my-notes/assets/js/131.61faa498.js"><link rel="prefetch" href="/my-notes/assets/js/132.9e46a3c4.js"><link rel="prefetch" href="/my-notes/assets/js/133.0b6e6f7f.js"><link rel="prefetch" href="/my-notes/assets/js/134.6724b7a7.js"><link rel="prefetch" href="/my-notes/assets/js/135.1d3daca0.js"><link rel="prefetch" href="/my-notes/assets/js/136.190f2a28.js"><link rel="prefetch" href="/my-notes/assets/js/137.5ce96397.js"><link rel="prefetch" href="/my-notes/assets/js/138.c0b55b02.js"><link rel="prefetch" href="/my-notes/assets/js/14.721e1994.js"><link rel="prefetch" href="/my-notes/assets/js/140.5226be4f.js"><link rel="prefetch" href="/my-notes/assets/js/141.196d1aa6.js"><link rel="prefetch" href="/my-notes/assets/js/142.11cbb52f.js"><link rel="prefetch" href="/my-notes/assets/js/143.509f8300.js"><link rel="prefetch" href="/my-notes/assets/js/144.436415bf.js"><link rel="prefetch" href="/my-notes/assets/js/145.a25cd8bc.js"><link rel="prefetch" href="/my-notes/assets/js/146.a2d1d780.js"><link rel="prefetch" href="/my-notes/assets/js/147.1cac4e0a.js"><link rel="prefetch" href="/my-notes/assets/js/148.5c361eba.js"><link rel="prefetch" href="/my-notes/assets/js/149.f62eacfa.js"><link rel="prefetch" href="/my-notes/assets/js/15.35ef567c.js"><link rel="prefetch" href="/my-notes/assets/js/150.80b0aa20.js"><link rel="prefetch" href="/my-notes/assets/js/151.6f0e31d8.js"><link rel="prefetch" href="/my-notes/assets/js/152.86efa86d.js"><link rel="prefetch" href="/my-notes/assets/js/153.d6605e26.js"><link rel="prefetch" href="/my-notes/assets/js/154.e5b33cc7.js"><link rel="prefetch" href="/my-notes/assets/js/155.5d3cf278.js"><link rel="prefetch" href="/my-notes/assets/js/156.bcb9784f.js"><link rel="prefetch" href="/my-notes/assets/js/157.ca3b8e8c.js"><link rel="prefetch" href="/my-notes/assets/js/158.eb0116b8.js"><link rel="prefetch" href="/my-notes/assets/js/159.309a26da.js"><link rel="prefetch" href="/my-notes/assets/js/16.ca698d39.js"><link rel="prefetch" href="/my-notes/assets/js/160.ce6e9321.js"><link rel="prefetch" href="/my-notes/assets/js/161.ac24f13a.js"><link rel="prefetch" href="/my-notes/assets/js/162.c3390211.js"><link rel="prefetch" href="/my-notes/assets/js/163.8267154f.js"><link rel="prefetch" href="/my-notes/assets/js/164.3ce822f9.js"><link rel="prefetch" href="/my-notes/assets/js/165.80836bd1.js"><link rel="prefetch" href="/my-notes/assets/js/166.7346e59a.js"><link rel="prefetch" href="/my-notes/assets/js/167.5577b6af.js"><link rel="prefetch" href="/my-notes/assets/js/168.23aca72c.js"><link rel="prefetch" href="/my-notes/assets/js/169.ce891665.js"><link rel="prefetch" href="/my-notes/assets/js/17.549cfc80.js"><link rel="prefetch" href="/my-notes/assets/js/170.b4aebdaf.js"><link rel="prefetch" href="/my-notes/assets/js/171.39cdd90b.js"><link rel="prefetch" href="/my-notes/assets/js/172.06cd5671.js"><link rel="prefetch" href="/my-notes/assets/js/173.44c7c161.js"><link rel="prefetch" href="/my-notes/assets/js/174.62d8a34f.js"><link rel="prefetch" href="/my-notes/assets/js/175.baa645ac.js"><link rel="prefetch" href="/my-notes/assets/js/176.8361f852.js"><link rel="prefetch" href="/my-notes/assets/js/177.4a8f2fec.js"><link rel="prefetch" href="/my-notes/assets/js/178.f594def6.js"><link rel="prefetch" href="/my-notes/assets/js/179.2338f129.js"><link rel="prefetch" href="/my-notes/assets/js/18.a8b4f826.js"><link rel="prefetch" href="/my-notes/assets/js/180.1b2f62df.js"><link rel="prefetch" href="/my-notes/assets/js/181.10759f41.js"><link rel="prefetch" href="/my-notes/assets/js/182.c0e1c3c5.js"><link rel="prefetch" href="/my-notes/assets/js/183.bdc8283f.js"><link rel="prefetch" href="/my-notes/assets/js/184.30a6f685.js"><link rel="prefetch" href="/my-notes/assets/js/185.1949079b.js"><link rel="prefetch" href="/my-notes/assets/js/186.bb7c7093.js"><link rel="prefetch" href="/my-notes/assets/js/187.1d02d132.js"><link rel="prefetch" href="/my-notes/assets/js/188.5230fbeb.js"><link rel="prefetch" href="/my-notes/assets/js/189.2931d469.js"><link rel="prefetch" href="/my-notes/assets/js/19.16e1a44c.js"><link rel="prefetch" href="/my-notes/assets/js/190.9bd3b616.js"><link rel="prefetch" href="/my-notes/assets/js/191.d75de9d3.js"><link rel="prefetch" href="/my-notes/assets/js/192.dacb160e.js"><link rel="prefetch" href="/my-notes/assets/js/193.660b4fce.js"><link rel="prefetch" href="/my-notes/assets/js/194.45f8499e.js"><link rel="prefetch" href="/my-notes/assets/js/195.e91d4663.js"><link rel="prefetch" href="/my-notes/assets/js/196.e94176ac.js"><link rel="prefetch" href="/my-notes/assets/js/197.5acbb43f.js"><link rel="prefetch" href="/my-notes/assets/js/198.dc1a1207.js"><link rel="prefetch" href="/my-notes/assets/js/199.288adcec.js"><link rel="prefetch" href="/my-notes/assets/js/20.b19ef4b2.js"><link rel="prefetch" href="/my-notes/assets/js/200.3d318d2e.js"><link rel="prefetch" href="/my-notes/assets/js/21.e3682738.js"><link rel="prefetch" href="/my-notes/assets/js/22.fafa8b54.js"><link rel="prefetch" href="/my-notes/assets/js/23.9d683b40.js"><link rel="prefetch" href="/my-notes/assets/js/24.02c0c08c.js"><link rel="prefetch" href="/my-notes/assets/js/25.af427f02.js"><link rel="prefetch" href="/my-notes/assets/js/26.50a41828.js"><link rel="prefetch" href="/my-notes/assets/js/27.8f1d2fe6.js"><link rel="prefetch" href="/my-notes/assets/js/28.7f820229.js"><link rel="prefetch" href="/my-notes/assets/js/29.208cdce3.js"><link rel="prefetch" href="/my-notes/assets/js/3.32ea0d41.js"><link rel="prefetch" href="/my-notes/assets/js/30.e7a171d3.js"><link rel="prefetch" href="/my-notes/assets/js/31.8ee9f363.js"><link rel="prefetch" href="/my-notes/assets/js/32.b33ae00e.js"><link rel="prefetch" href="/my-notes/assets/js/33.3a961845.js"><link rel="prefetch" href="/my-notes/assets/js/34.46f30eb6.js"><link rel="prefetch" href="/my-notes/assets/js/35.dedda1f7.js"><link rel="prefetch" href="/my-notes/assets/js/36.fb63ded5.js"><link rel="prefetch" href="/my-notes/assets/js/37.321340a9.js"><link rel="prefetch" href="/my-notes/assets/js/38.c21281dd.js"><link rel="prefetch" href="/my-notes/assets/js/39.01776b7e.js"><link rel="prefetch" href="/my-notes/assets/js/4.2466bf2a.js"><link rel="prefetch" href="/my-notes/assets/js/40.c6763f18.js"><link rel="prefetch" href="/my-notes/assets/js/41.afa4c2f3.js"><link rel="prefetch" href="/my-notes/assets/js/42.187357b5.js"><link rel="prefetch" href="/my-notes/assets/js/43.90030eae.js"><link rel="prefetch" href="/my-notes/assets/js/44.e11eff59.js"><link rel="prefetch" href="/my-notes/assets/js/45.760e3e3f.js"><link rel="prefetch" href="/my-notes/assets/js/46.0eccc1a4.js"><link rel="prefetch" href="/my-notes/assets/js/47.30e063f8.js"><link rel="prefetch" href="/my-notes/assets/js/48.5ab681d2.js"><link rel="prefetch" href="/my-notes/assets/js/49.5921c987.js"><link rel="prefetch" href="/my-notes/assets/js/5.56264475.js"><link rel="prefetch" href="/my-notes/assets/js/50.a53fa873.js"><link rel="prefetch" href="/my-notes/assets/js/51.5cded08c.js"><link rel="prefetch" href="/my-notes/assets/js/52.8960c473.js"><link rel="prefetch" href="/my-notes/assets/js/53.2ac21c0e.js"><link rel="prefetch" href="/my-notes/assets/js/54.361bc2f3.js"><link rel="prefetch" href="/my-notes/assets/js/55.3853b7f3.js"><link rel="prefetch" href="/my-notes/assets/js/56.754a3b4c.js"><link rel="prefetch" href="/my-notes/assets/js/57.1d9684e7.js"><link rel="prefetch" href="/my-notes/assets/js/58.0e7f2b60.js"><link rel="prefetch" href="/my-notes/assets/js/59.b37ab2f4.js"><link rel="prefetch" href="/my-notes/assets/js/60.f31d0aea.js"><link rel="prefetch" href="/my-notes/assets/js/61.5aebeb50.js"><link rel="prefetch" href="/my-notes/assets/js/62.cebf26d6.js"><link rel="prefetch" href="/my-notes/assets/js/63.6c7932ca.js"><link rel="prefetch" href="/my-notes/assets/js/64.cad8a013.js"><link rel="prefetch" href="/my-notes/assets/js/65.25e4c14e.js"><link rel="prefetch" href="/my-notes/assets/js/66.e9c81af6.js"><link rel="prefetch" href="/my-notes/assets/js/67.31cbef00.js"><link rel="prefetch" href="/my-notes/assets/js/68.edc93332.js"><link rel="prefetch" href="/my-notes/assets/js/69.5eaf1e4f.js"><link rel="prefetch" href="/my-notes/assets/js/7.5a6eeb6c.js"><link rel="prefetch" href="/my-notes/assets/js/70.7114cd64.js"><link rel="prefetch" href="/my-notes/assets/js/71.2066867c.js"><link rel="prefetch" href="/my-notes/assets/js/72.0f93cb73.js"><link rel="prefetch" href="/my-notes/assets/js/73.6c4d69ec.js"><link rel="prefetch" href="/my-notes/assets/js/74.0a91fc3c.js"><link rel="prefetch" href="/my-notes/assets/js/75.47e45f38.js"><link rel="prefetch" href="/my-notes/assets/js/76.99886a8d.js"><link rel="prefetch" href="/my-notes/assets/js/77.61eb4f51.js"><link rel="prefetch" href="/my-notes/assets/js/78.eff53df7.js"><link rel="prefetch" href="/my-notes/assets/js/79.e5d77573.js"><link rel="prefetch" href="/my-notes/assets/js/80.8ac4e931.js"><link rel="prefetch" href="/my-notes/assets/js/81.82416621.js"><link rel="prefetch" href="/my-notes/assets/js/82.b7cea701.js"><link rel="prefetch" href="/my-notes/assets/js/83.eb0065f7.js"><link rel="prefetch" href="/my-notes/assets/js/84.45596ac9.js"><link rel="prefetch" href="/my-notes/assets/js/85.73902eef.js"><link rel="prefetch" href="/my-notes/assets/js/86.05a157f2.js"><link rel="prefetch" href="/my-notes/assets/js/87.83218f21.js"><link rel="prefetch" href="/my-notes/assets/js/88.bf05ee49.js"><link rel="prefetch" href="/my-notes/assets/js/89.089b5c96.js"><link rel="prefetch" href="/my-notes/assets/js/9.4a5b4024.js"><link rel="prefetch" href="/my-notes/assets/js/90.dc0b55a6.js"><link rel="prefetch" href="/my-notes/assets/js/91.ddc7da4f.js"><link rel="prefetch" href="/my-notes/assets/js/92.2b5c7d5f.js"><link rel="prefetch" href="/my-notes/assets/js/93.934a02e9.js"><link rel="prefetch" href="/my-notes/assets/js/94.3a6ede23.js"><link rel="prefetch" href="/my-notes/assets/js/95.0e946220.js"><link rel="prefetch" href="/my-notes/assets/js/96.3861fb05.js"><link rel="prefetch" href="/my-notes/assets/js/97.8627cefa.js"><link rel="prefetch" href="/my-notes/assets/js/98.6e0ee750.js"><link rel="prefetch" href="/my-notes/assets/js/99.5df99b25.js">
    <link rel="stylesheet" href="/my-notes/assets/css/0.styles.565c6041.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-notes/" class="home-link router-link-active"><img src="/my-notes/img/logo.jpg" alt="DK's Notes" class="logo"> <span class="site-name can-hide">DK's Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-notes/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/my-notes/about/website/tools/" class="nav-link">å¯¼èˆªç«™</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/my-notes/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java-Se</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/java/se/base/" class="nav-link">JavaåŸºç¡€</a></li></ul></li><li class="dropdown-item"><h4>Java-Seè¿›é˜¶-å¤šçº¿ç¨‹</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/java/se/thread/" class="nav-link">å¤šçº¿ç¨‹</a></li></ul></li><li class="dropdown-item"><h4>Java-Seè¿›é˜¶-java8æ–°ç‰¹æ€§</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/java/se/java8/" class="nav-link">java8æ–°ç‰¹æ€§</a></li></ul></li><li class="dropdown-item"><h4>Java-ee</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/javaweb/" class="nav-link">JavaWeb</a></li></ul></li><li class="dropdown-item"><h4>Javaè™šæ‹Ÿæœº</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/JVM/" class="nav-link">JVM</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><a href="/my-notes/mysql/" class="link-title">æ•°æ®åº“</a> <span class="title" style="display:none;">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL æ•°æ®åº“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/mysql/" class="nav-link">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL æ•°æ®åº“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/my-notes/es/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/my-notes/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ¡†æ¶" class="dropdown-title"><a href="/my-notes/mybatis/study-note/" class="link-title">æ¡†æ¶</a> <span class="title" style="display:none;">æ¡†æ¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ORM</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/mybatis/study-note/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/my-notes/mybatis-plus/study-note/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>Spring</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/Spring/study-note/" class="nav-link">Spring</a></li></ul></li><li class="dropdown-item"><h4>SpringMVC</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/SpringMvc/study-note/1/" class="nav-link">SpringMVC1</a></li><li class="dropdown-subitem"><a href="/my-notes/SpringMvc/study-note/2/" class="nav-link">SpringMVC2</a></li></ul></li><li class="dropdown-item"><h4>SpringCloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/SpringCloud/" class="nav-link router-link-active">SpringCloud</a></li></ul></li><li class="dropdown-item"><h4>ä¸­é—´ä»¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/rabbitmq/" class="nav-link">RabbitMQ</a></li><li class="dropdown-subitem"><a href="/my-notes/dubbo/" class="nav-link">Dubbo</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¡¹ç›®" class="dropdown-title"><a href="/my-notes/project/seckill/" class="link-title">é¡¹ç›®</a> <span class="title" style="display:none;">é¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-notes/project/seckill/" class="nav-link">ç§’æ€é¡¹ç›®</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥å…·|éƒ¨ç½²" class="dropdown-title"><a href="/my-notes/git/" class="link-title">å·¥å…·|éƒ¨ç½²</a> <span class="title" style="display:none;">å·¥å…·|éƒ¨ç½²</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-notes/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/my-notes/Linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/my-notes/Docker/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/my-notes/JWT/note/" class="nav-link">JWT</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¢è¯•|åˆ·é¢˜" class="dropdown-title"><a href="/my-notes/work/interview/" class="link-title">é¢è¯•|åˆ·é¢˜</a> <span class="title" style="display:none;">é¢è¯•|åˆ·é¢˜</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-notes/work/interview/" class="nav-link">é¢è¯•</a></li><li class="dropdown-item"><!----> <a href="/my-notes/work/algorithm/" class="nav-link">åˆ·é¢˜</a></li></ul></div></div><div class="nav-item"><a href="/my-notes/dev/question/" class="nav-link">å¼€å‘é—®é¢˜ğŸ˜ˆ</a></div><div class="nav-item"><a href="/my-notes/designPattern/" class="nav-link">è®¾è®¡æ¨¡å¼</a></div><div class="nav-item"><a href="/my-notes/about/" class="nav-link">å…³äºğŸ’•</a></div><div class="nav-item"><a href="/my-notes/archives/" class="nav-link">å½’æ¡£ğŸ•›</a></div> <a href="https://github.com/hnistzdk/my-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.jpg"> <div class="blogger-info"><h3>é£</h3> <span>æ‘¸é±¼</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/my-notes/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/my-notes/about/website/tools/" class="nav-link">å¯¼èˆªç«™</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/my-notes/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Java-Se</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/java/se/base/" class="nav-link">JavaåŸºç¡€</a></li></ul></li><li class="dropdown-item"><h4>Java-Seè¿›é˜¶-å¤šçº¿ç¨‹</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/java/se/thread/" class="nav-link">å¤šçº¿ç¨‹</a></li></ul></li><li class="dropdown-item"><h4>Java-Seè¿›é˜¶-java8æ–°ç‰¹æ€§</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/java/se/java8/" class="nav-link">java8æ–°ç‰¹æ€§</a></li></ul></li><li class="dropdown-item"><h4>Java-ee</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/javaweb/" class="nav-link">JavaWeb</a></li></ul></li><li class="dropdown-item"><h4>Javaè™šæ‹Ÿæœº</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/JVM/" class="nav-link">JVM</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><a href="/my-notes/mysql/" class="link-title">æ•°æ®åº“</a> <span class="title" style="display:none;">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL æ•°æ®åº“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/mysql/" class="nav-link">MySQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL æ•°æ®åº“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/my-notes/es/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/my-notes/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ¡†æ¶" class="dropdown-title"><a href="/my-notes/mybatis/study-note/" class="link-title">æ¡†æ¶</a> <span class="title" style="display:none;">æ¡†æ¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>ORM</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/mybatis/study-note/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/my-notes/mybatis-plus/study-note/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>Spring</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/Spring/study-note/" class="nav-link">Spring</a></li></ul></li><li class="dropdown-item"><h4>SpringMVC</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/SpringMvc/study-note/1/" class="nav-link">SpringMVC1</a></li><li class="dropdown-subitem"><a href="/my-notes/SpringMvc/study-note/2/" class="nav-link">SpringMVC2</a></li></ul></li><li class="dropdown-item"><h4>SpringCloud</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/SpringCloud/" class="nav-link router-link-active">SpringCloud</a></li></ul></li><li class="dropdown-item"><h4>ä¸­é—´ä»¶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-notes/rabbitmq/" class="nav-link">RabbitMQ</a></li><li class="dropdown-subitem"><a href="/my-notes/dubbo/" class="nav-link">Dubbo</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¡¹ç›®" class="dropdown-title"><a href="/my-notes/project/seckill/" class="link-title">é¡¹ç›®</a> <span class="title" style="display:none;">é¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-notes/project/seckill/" class="nav-link">ç§’æ€é¡¹ç›®</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·¥å…·|éƒ¨ç½²" class="dropdown-title"><a href="/my-notes/git/" class="link-title">å·¥å…·|éƒ¨ç½²</a> <span class="title" style="display:none;">å·¥å…·|éƒ¨ç½²</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-notes/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/my-notes/Linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/my-notes/Docker/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/my-notes/JWT/note/" class="nav-link">JWT</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¢è¯•|åˆ·é¢˜" class="dropdown-title"><a href="/my-notes/work/interview/" class="link-title">é¢è¯•|åˆ·é¢˜</a> <span class="title" style="display:none;">é¢è¯•|åˆ·é¢˜</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my-notes/work/interview/" class="nav-link">é¢è¯•</a></li><li class="dropdown-item"><!----> <a href="/my-notes/work/algorithm/" class="nav-link">åˆ·é¢˜</a></li></ul></div></div><div class="nav-item"><a href="/my-notes/dev/question/" class="nav-link">å¼€å‘é—®é¢˜ğŸ˜ˆ</a></div><div class="nav-item"><a href="/my-notes/designPattern/" class="nav-link">è®¾è®¡æ¨¡å¼</a></div><div class="nav-item"><a href="/my-notes/about/" class="nav-link">å…³äºğŸ’•</a></div><div class="nav-item"><a href="/my-notes/archives/" class="nav-link">å½’æ¡£ğŸ•›</a></div> <a href="https://github.com/hnistzdk/my-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mybatis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mybatis-plus</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SpringMvc</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>RabbitMQ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Dubbo</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>SpringCloud</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-notes/SpringCloud/" aria-current="page" class="sidebar-link">SpringCloudçŸ¥è¯†ä½“ç³»</a></li><li><a href="/my-notes/SpringCloud/Eureka/" class="sidebar-link">Eureka</a></li><li><a href="/my-notes/SpringCloud/ZookeeperAndConsul/" class="sidebar-link">ZookeeperAndConsul</a></li><li><a href="/my-notes/SpringCloud/ribbon/" class="sidebar-link">Ribbn</a></li><li><a href="/my-notes/SpringCloud/OpenFeign/" class="sidebar-link">OpenFeign</a></li><li><a href="/my-notes/SpringCloud/Hystrix/" class="sidebar-link">Hystrix</a></li><li><a href="/my-notes/SpringCloud/Gateway/" class="sidebar-link">Gateway</a></li><li><a href="/my-notes/SpringCloud/Config/" class="sidebar-link">Config</a></li><li><a href="/my-notes/SpringCloud/Bus/" class="sidebar-link">Bus</a></li><li><a href="/my-notes/SpringCloud/Stream/" class="sidebar-link">Stream</a></li><li><a href="/my-notes/SpringCloud/Sleuth/" class="sidebar-link">Sleuth</a></li><li><a href="/my-notes/SpringCloud/Nacos/" aria-current="page" class="active sidebar-link">Nacos</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/my-notes/SpringCloud/Nacos/#nacosç®€ä»‹" class="sidebar-link">Nacosç®€ä»‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#ä¸ºä»€ä¹ˆå«nacos" class="sidebar-link">ä¸ºä»€ä¹ˆå«Nacos</a></li><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#æ˜¯ä»€ä¹ˆ" class="sidebar-link">æ˜¯ä»€ä¹ˆ</a></li><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#èƒ½å¹²å˜›" class="sidebar-link">èƒ½å¹²å˜›</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/my-notes/SpringCloud/Nacos/#å®‰è£…å¹¶è¿è¡Œnacos" class="sidebar-link">å®‰è£…å¹¶è¿è¡ŒNacos</a></li><li class="sidebar-sub-header level2"><a href="/my-notes/SpringCloud/Nacos/#nacosä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒæ¼”ç¤º" class="sidebar-link">Nacosä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒæ¼”ç¤º</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#æœåŠ¡æä¾›è€…" class="sidebar-link">æœåŠ¡æä¾›è€…</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#pom" class="sidebar-link">pom</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#yaml" class="sidebar-link">yaml</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#ä¸»å¯åŠ¨ç±»" class="sidebar-link">ä¸»å¯åŠ¨ç±»</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#controller" class="sidebar-link">Controller</a></li><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#æœåŠ¡æ¶ˆè´¹è€…" class="sidebar-link">æœåŠ¡æ¶ˆè´¹è€…</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#pom-2" class="sidebar-link">pom</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#yaml-2" class="sidebar-link">yaml</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#ä¸šåŠ¡ç±»" class="sidebar-link">ä¸šåŠ¡ç±»</a></li><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#æµ‹è¯•" class="sidebar-link">æµ‹è¯•</a></li><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#æ³¨å†Œä¸­å¿ƒå¯¹æ¯”" class="sidebar-link">æ³¨å†Œä¸­å¿ƒå¯¹æ¯”</a></li><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#apã€cpåˆ‡æ¢" class="sidebar-link">APã€CPåˆ‡æ¢</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/my-notes/SpringCloud/Nacos/#nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒæ¼”ç¤º" class="sidebar-link">Nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒæ¼”ç¤º</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#åŸºç¡€é…ç½®" class="sidebar-link">åŸºç¡€é…ç½®</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#pom-3" class="sidebar-link">pom</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#yaml-3" class="sidebar-link">yaml</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#ä¸»å¯åŠ¨ç±»-2" class="sidebar-link">ä¸»å¯åŠ¨ç±»</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#controller-2" class="sidebar-link">Controller</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#åœ¨nacosä¸­æ·»åŠ é…ç½®ä¿¡æ¯" class="sidebar-link">åœ¨Nacosä¸­æ·»åŠ é…ç½®ä¿¡æ¯</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#nacosä¸­çš„åŒ¹é…è§„åˆ™" class="sidebar-link">Nacosä¸­çš„åŒ¹é…è§„åˆ™</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#åœ¨nacosè¿›è¡Œæ·»åŠ é…ç½®" class="sidebar-link">åœ¨nacosè¿›è¡Œæ·»åŠ é…ç½®</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#æµ‹è¯•-2" class="sidebar-link">æµ‹è¯•</a></li><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#åˆ†ç±»é…ç½®" class="sidebar-link">åˆ†ç±»é…ç½®</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡" class="sidebar-link">ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#ä¸‰ç§æ–¹æ¡ˆåŠ è½½é…ç½®" class="sidebar-link">ä¸‰ç§æ–¹æ¡ˆåŠ è½½é…ç½®</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#dataidæ–¹æ¡ˆ" class="sidebar-link">DataIdæ–¹æ¡ˆ</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#groupæ–¹æ¡ˆ" class="sidebar-link">Groupæ–¹æ¡ˆ</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#namespaceæ–¹æ¡ˆ" class="sidebar-link">Namespaceæ–¹æ¡ˆ</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/my-notes/SpringCloud/Nacos/#nacosé›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®-é‡è¦" class="sidebar-link">Nacosé›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®(é‡è¦)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#å°†å•ä½“nacosæ•°æ®åº“è¿ç§»åˆ°mysql" class="sidebar-link">å°†å•ä½“Nacosæ•°æ®åº“è¿ç§»åˆ°MySQL</a></li><li class="sidebar-sub-header level3"><a href="/my-notes/SpringCloud/Nacos/#linuxç‰ˆnacos-mysqlç”Ÿäº§ç¯å¢ƒé…ç½®" class="sidebar-link">Linuxç‰ˆNacos+MySQLç”Ÿäº§ç¯å¢ƒé…ç½®</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#linuxå®‰è£…æ­¥éª¤" class="sidebar-link">Linuxå®‰è£…æ­¥éª¤</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#é›†ç¾¤é…ç½®æ­¥éª¤-é‡ç‚¹" class="sidebar-link">é›†ç¾¤é…ç½®æ­¥éª¤(é‡ç‚¹)</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#mysql" class="sidebar-link">MySQL</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#cluster-conf" class="sidebar-link">cluster.conf</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#startup-shè„šæœ¬" class="sidebar-link">startup.shè„šæœ¬</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#nginxé…ç½®" class="sidebar-link">nginxé…ç½®</a></li><li class="sidebar-sub-header level4"><a href="/my-notes/SpringCloud/Nacos/#æµ‹è¯•-3" class="sidebar-link">æµ‹è¯•</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#æµ‹è¯•æ³¨å†ŒåŠŸèƒ½" class="sidebar-link">æµ‹è¯•æ³¨å†ŒåŠŸèƒ½</a></li><li class="sidebar-sub-header level5"><a href="/my-notes/SpringCloud/Nacos/#æ€»ç»“" class="sidebar-link">æ€»ç»“</a></li></ul></li></ul></li><li><a href="/my-notes/SpringCloud/Sentinel/" class="sidebar-link">Sentinel</a></li><li><a href="/my-notes/SpringCloud/Seata/" class="sidebar-link">Seata</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/my-notes/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/my-notes/categories/?category=%E6%A1%86%E6%9E%B6" title="åˆ†ç±»" data-v-06225672>æ¡†æ¶</a></li><li data-v-06225672><a href="/my-notes/categories/?category=SpringCloud" title="åˆ†ç±»" data-v-06225672>SpringCloud</a></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="https://www.zaiolos.top/" target="_blank" title="ä½œè€…" class="beLink" data-v-06225672>zdk</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-11-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Nacos<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p><strong>Table of Contents</strong> <em>generated with <a href="https://github.com/thlorenz/doctoc" target="_blank" rel="noopener noreferrer">DocToc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></em></p> <ul><li><a href="#nacos">Nacos</a> <ul><li><a href="#nacos%E7%AE%80%E4%BB%8B">Nacosç®€ä»‹</a> <ul><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%ABnacos">ä¸ºä»€ä¹ˆå«Nacos</a></li> <li><a href="#%E6%98%AF%E4%BB%80%E4%B9%88">æ˜¯ä»€ä¹ˆ</a></li> <li><a href="#%E8%83%BD%E5%B9%B2%E5%98%9B">èƒ½å¹²å˜›</a></li></ul></li> <li><a href="#%E5%AE%89%E8%A3%85%E5%B9%B6%E8%BF%90%E8%A1%8Cnacos">å®‰è£…å¹¶è¿è¡ŒNacos</a></li> <li><a href="#nacos%E4%BD%9C%E4%B8%BA%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E6%BC%94%E7%A4%BA">Nacosä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒæ¼”ç¤º</a> <ul><li><a href="#%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85">æœåŠ¡æä¾›è€…</a> <ul><li><a href="#pom">pom</a></li> <li><a href="#yaml">yaml</a></li> <li><a href="#%E4%B8%BB%E5%90%AF%E5%8A%A8%E7%B1%BB">ä¸»å¯åŠ¨ç±»</a></li> <li><a href="#controller">Controller</a></li></ul></li> <li><a href="#%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85">æœåŠ¡æ¶ˆè´¹è€…</a> <ul><li><a href="#pom-1">pom</a></li> <li><a href="#yaml-1">yaml</a></li> <li><a href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB">ä¸šåŠ¡ç±»</a></li></ul></li> <li><a href="#%E6%B5%8B%E8%AF%95">æµ‹è¯•</a></li> <li><a href="#%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83%E5%AF%B9%E6%AF%94">æ³¨å†Œä¸­å¿ƒå¯¹æ¯”</a></li> <li><a href="#apcp%E5%88%87%E6%8D%A2">APã€CPåˆ‡æ¢</a></li></ul></li> <li><a href="#nacos%E4%BD%9C%E4%B8%BA%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%E6%BC%94%E7%A4%BA">Nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒæ¼”ç¤º</a> <ul><li><a href="#%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE">åŸºç¡€é…ç½®</a> <ul><li><a href="#pom-2">pom</a></li> <li><a href="#yaml-2">yaml</a></li> <li><a href="#%E4%B8%BB%E5%90%AF%E5%8A%A8%E7%B1%BB-1">ä¸»å¯åŠ¨ç±»</a></li> <li><a href="#controller-1">Controller</a></li> <li><a href="#%E5%9C%A8nacos%E4%B8%AD%E6%B7%BB%E5%8A%A0%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF">åœ¨Nacosä¸­æ·»åŠ é…ç½®ä¿¡æ¯</a> <ul><li><a href="#nacos%E4%B8%AD%E7%9A%84%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99">Nacosä¸­çš„åŒ¹é…è§„åˆ™</a></li> <li><a href="#%E5%9C%A8nacos%E8%BF%9B%E8%A1%8C%E6%B7%BB%E5%8A%A0%E9%85%8D%E7%BD%AE">åœ¨nacosè¿›è¡Œæ·»åŠ é…ç½®</a></li> <li><a href="#%E6%B5%8B%E8%AF%95-1">æµ‹è¯•</a></li></ul></li></ul></li> <li><a href="#%E5%88%86%E7%B1%BB%E9%85%8D%E7%BD%AE">åˆ†ç±»é…ç½®</a> <ul><li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%99%E6%A0%B7%E8%AE%BE%E8%AE%A1">ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</a></li> <li><a href="#%E4%B8%89%E7%A7%8D%E6%96%B9%E6%A1%88%E5%8A%A0%E8%BD%BD%E9%85%8D%E7%BD%AE">ä¸‰ç§æ–¹æ¡ˆåŠ è½½é…ç½®</a> <ul><li><a href="#dataid%E6%96%B9%E6%A1%88">DataIdæ–¹æ¡ˆ</a></li> <li><a href="#group%E6%96%B9%E6%A1%88">Groupæ–¹æ¡ˆ</a></li> <li><a href="#namespace%E6%96%B9%E6%A1%88">Namespaceæ–¹æ¡ˆ</a></li></ul></li></ul></li></ul></li> <li><a href="#nacos%E9%9B%86%E7%BE%A4%E5%92%8C%E6%8C%81%E4%B9%85%E5%8C%96%E9%85%8D%E7%BD%AE%E9%87%8D%E8%A6%81">Nacosé›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®(é‡è¦)</a> <ul><li><a href="#%E5%B0%86%E5%8D%95%E4%BD%93nacos%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB%E5%88%B0mysql">å°†å•ä½“Nacosæ•°æ®åº“è¿ç§»åˆ°MySQL</a></li> <li><a href="#linux%E7%89%88nacosmysql%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">Linuxç‰ˆNacos+MySQLç”Ÿäº§ç¯å¢ƒé…ç½®</a> <ul><li><a href="#linux%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4">Linuxå®‰è£…æ­¥éª¤</a></li> <li><a href="#%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4%E9%87%8D%E7%82%B9">é›†ç¾¤é…ç½®æ­¥éª¤(é‡ç‚¹)</a> <ul><li><a href="#mysql">MySQL</a></li> <li><a href="#clusterconf">cluster.conf</a></li> <li><a href="#startupsh%E8%84%9A%E6%9C%AC">startup.shè„šæœ¬</a></li> <li><a href="#nginx%E9%85%8D%E7%BD%AE">nginxé…ç½®</a></li></ul></li> <li><a href="#%E6%B5%8B%E8%AF%95-2">æµ‹è¯•</a> <ul><li><a href="#%E6%B5%8B%E8%AF%95%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD">æµ‹è¯•æ³¨å†ŒåŠŸèƒ½</a></li> <li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li></ul></li></ul></li></ul></li></ul></li></ul> <hr> <h1 id="nacos"><a href="#nacos" class="header-anchor">#</a> Nacos</h1> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2021.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>é¦–å…ˆéœ€è¦å¼•å…¥spring-cloud-alibaba-dependenciesä¾èµ–ç®¡ç†</p></blockquote> <span class="badge error" style="vertical-align:top;" data-v-d5affa18>Nacos æœåŠ¡æ³¨å†Œä¸é…ç½®ä¸­å¿ƒ</span> <h2 id="nacosç®€ä»‹"><a href="#nacosç®€ä»‹" class="header-anchor">#</a> Nacosç®€ä»‹</h2> <h3 id="ä¸ºä»€ä¹ˆå«nacos"><a href="#ä¸ºä»€ä¹ˆå«nacos" class="header-anchor">#</a> ä¸ºä»€ä¹ˆå«Nacos</h3> <blockquote><p>å‰å››ä¸ªå­—æ¯åˆ†åˆ«ä¸ºNamingå’ŒConfigurationçš„å‰ä¸¤ä¸ªå­—æ¯ï¼Œæœ€åçš„sä¸ºService</p></blockquote> <h3 id="æ˜¯ä»€ä¹ˆ"><a href="#æ˜¯ä»€ä¹ˆ" class="header-anchor">#</a> æ˜¯ä»€ä¹ˆ</h3> <ul><li>ä¸€ä¸ªæ›´æ˜“äºæ„å»ºäº‘åŸç”Ÿåº”ç”¨çš„åŠ¨æ€æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’ŒæœåŠ¡ç®¡ç†å¹³å°</li> <li>Nacosï¼šDynamic Naming and Configuration Serviceï¼Œå³æ³¨å†Œä¸­å¿ƒä¸é…ç½®ä¸­å¿ƒçš„ç»„åˆ</li></ul> <h3 id="èƒ½å¹²å˜›"><a href="#èƒ½å¹²å˜›" class="header-anchor">#</a> èƒ½å¹²å˜›</h3> <ul><li>æ›¿ä»£Eurekaä½œä¸ºæ³¨å†Œä¸­å¿ƒ</li> <li>æ›¿ä»£Configä½œä¸ºé…ç½®ä¸­å¿ƒ</li></ul> <p><img src="https://images.zaiolos.top/images/202211151718636.png" alt="image-20221115171832488"></p> <h2 id="å®‰è£…å¹¶è¿è¡Œnacos"><a href="#å®‰è£…å¹¶è¿è¡Œnacos" class="header-anchor">#</a> å®‰è£…å¹¶è¿è¡ŒNacos</h2> <ul><li>ä»GitHubä¸‹è½½nacos-server-2.1.2.zipï¼Œ(.tar.gzæ˜¯Linuxçš„)</li> <li>å‹è§£å®‰è£…åŒ…ï¼Œç›´æ¥è¿è¡Œbinç›®å½•ä¸‹çš„startup.cmd</li> <li>å‘½ä»¤è¿è¡ŒæˆåŠŸåç›´æ¥è®¿é—®ï¼šhttp://localhost:8848/nacos</li></ul> <p>è¿™é‡Œè¦æ³¨æ„ï¼Œè¿è¡Œæ—¶éœ€è¦å¢åŠ å‘½ä»¤å‚æ•°<code>-m standalone</code>ï¼Œå¦åˆ™è¿è¡Œå¤±è´¥</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>startup.cmd <span class="token parameter variable">-m</span> standalone <span class="token comment"># å•æœºæ¨¡å¼å¯åŠ¨ å› ä¸ºé»˜è®¤æ˜¯é›†ç¾¤æ¨¡å¼</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://images.zaiolos.top/images/202211151735954.png" alt="image-20221115173526865"></p> <h2 id="nacosä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒæ¼”ç¤º"><a href="#nacosä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒæ¼”ç¤º" class="header-anchor">#</a> Nacosä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒæ¼”ç¤º</h2> <h3 id="æœåŠ¡æä¾›è€…"><a href="#æœåŠ¡æä¾›è€…" class="header-anchor">#</a> æœåŠ¡æä¾›è€…</h3> <blockquote><p>æ–°å»ºcloudalibaba-provider-payment9001æ¨¡å—</p></blockquote> <h4 id="pom"><a href="#pom" class="header-anchor">#</a> pom</h4> <blockquote><p>å‰é¢çš„çˆ¶pomä¸­è¦åŠ cloud alibabaçš„çˆ¶ä¾èµ–ï¼Œè¿™é‡Œå­pomç›¸è¾ƒä»¥å‰ï¼Œåˆ é™¤eurekaçš„ä¾èµ–ï¼Œå¢åŠ nacosçš„ä¾èµ–</p></blockquote> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--        é€šç”¨çš„ä¾èµ–--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.zdk<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- nacosä¾èµ– --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h4 id="yaml"><a href="#yaml" class="header-anchor">#</a> yaml</h4> <blockquote><p>yamlä¸»è¦å°±æ˜¯é…ç½®nacosæ³¨å†Œä¸­å¿ƒåœ°å€å’Œactuatorç›‘æ§ç®¡ç†</p></blockquote> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9001</span>
  
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>provider
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
          
<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">'*'</span>         
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="ä¸»å¯åŠ¨ç±»"><a href="#ä¸»å¯åŠ¨ç±»" class="header-anchor">#</a> ä¸»å¯åŠ¨ç±»</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain9001</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain9001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="controller"><a href="#controller" class="header-anchor">#</a> Controller</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/nacos/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPayment</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;nacos registry, serverPortï¼š&quot;</span><span class="token operator">+</span>serverPort<span class="token operator">+</span><span class="token string">&quot;\t idï¼š&quot;</span><span class="token operator">+</span>id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>æœ€åå¯åŠ¨æ­¤9001æœåŠ¡ï¼Œå¯ä»¥åœ¨nacosæ§åˆ¶å°ä¸­æŸ¥çœ‹åˆ°æœåŠ¡æ³¨å†Œæƒ…å†µ</p></blockquote> <p><img src="https://images.zaiolos.top/images/202211151750578.png" alt="image-20221115175037508"></p> <blockquote><p>æœ€åï¼Œä¸ºäº†æ¼”ç¤ºåé¢çš„nacosè´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œå‚ç…§9001å†å»ºä¸€ä¸ª9002æ¨¡å—ï¼Œæ­¥éª¤ä¸å†èµ˜è¿°ï¼Œå¯åŠ¨åå¯ä»¥å‘ç°nacosæ§åˆ¶å°<code>nacos-payment-provider</code>æœåŠ¡å®ä¾‹æ•°é‡å·²å˜ä¸º2</p></blockquote> <p><img src="https://images.zaiolos.top/images/202211151758907.png" alt="image-20221115175848839"></p> <h3 id="æœåŠ¡æ¶ˆè´¹è€…"><a href="#æœåŠ¡æ¶ˆè´¹è€…" class="header-anchor">#</a> æœåŠ¡æ¶ˆè´¹è€…</h3> <blockquote><p>æ–°å»ºæ¶ˆè´¹è€…æ¨¡å—cloudalibaba-consumer-nacos-order83</p></blockquote> <h4 id="pom-2"><a href="#pom-2" class="header-anchor">#</a> pom</h4> <blockquote><p>å°†providerçš„pomå¤åˆ¶è¿‡æ¥ï¼Œæ–°å¢<code>spring-cloud-starter-loadbanlacer</code>çš„ä¾èµ–</p> <p>è¿™é‡Œè¦æ³¨æ„ï¼Œæˆ‘æ˜¯ç”¨çš„2021.0.4.0ç‰ˆæœ¬cloud alibabaçš„nacos-discoveryåŒ…ä¸­ï¼Œå·²ç»å»é™¤æ‰äº†loadbanlacerçš„ä¾èµ–ï¼Œæ‰€ä»¥ä¸èƒ½å†ç›´æ¥è¿›è¡Œrest+æœåŠ¡åçš„è°ƒç”¨ï¼Œä¸”ä¸æ”¯æŒäº†è´Ÿè½½å‡è¡¡ï¼Œæ‰€ä»¥è¿™é‡Œè¦æµ‹è¯•çš„è¯è¿˜éœ€è¦å†å°†loadbanlacerçš„åŒ…è¿›è¡Œå¼•å…¥ï¼Œ<strong>å¹¶ä¸”è®°å¾—æ³¨å…¥RestTemplateæ—¶åŠ ä¸Š<code>@LoadBalanced</code>æ³¨è§£</strong></p></blockquote> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- nacosä¾èµ– --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- loadbalancerä¾èµ– --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-loadbalancer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="yaml-2"><a href="#yaml-2" class="header-anchor">#</a> yaml</h4> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">83</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>order<span class="token punctuation">-</span>consumer
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>

<span class="token comment"># ç”¨æ¥åœ¨ä»£ç ä¸­è·å–provideræœåŠ¡åœ°å€</span>
<span class="token key atrule">service-url</span><span class="token punctuation">:</span>
  <span class="token key atrule">nacos-user-service</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//nacos<span class="token punctuation">-</span>payment<span class="token punctuation">-</span>provider

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>ä¸»å¯åŠ¨ç±»ä¸å¤šèµ˜è¿°</p></blockquote> <p>å› ä¸ºè¿™é‡Œä½¿ç”¨åˆ°äº†ribbonï¼Œæ‰€ä»¥éœ€è¦æ³¨å…¥ä¸€ä¸ªRestTemplateçš„Bean</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@LoadBalanced</span> <span class="token comment">//å¿…é¡»åŠ è¿™ä¸ªæ³¨è§£ æ‰èƒ½ä½¿ç”¨æœåŠ¡åèµ°æ³¨å†Œä¸­å¿ƒè¿›è¡Œrestè°ƒç”¨</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">restTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>   
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="ä¸šåŠ¡ç±»"><a href="#ä¸šåŠ¡ç±»" class="header-anchor">#</a> ä¸šåŠ¡ç±»</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderNacosController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${service-url.nacos-user-service}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serviceUrl<span class="token punctuation">;</span>


    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/consumer/payment/nacos/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>serviceUrl<span class="token operator">+</span><span class="token string">&quot;/payemnt/nacos/&quot;</span><span class="token operator">+</span>id<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>æœ€åå¯åŠ¨æ­¤æ¶ˆè´¹è€…ï¼Œnacosæ§åˆ¶å°å‡ºç°å®ƒçš„ä¿¡æ¯å³å¯</p></blockquote> <p><img src="https://images.zaiolos.top/images/202211151832464.png" alt="image-20221115183213390"></p> <h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="header-anchor">#</a> æµ‹è¯•</h3> <blockquote><p>ä¸‰ä¸ªæœåŠ¡å‡å¯åŠ¨å¥½ï¼Œè®¿é—®http://localhost:83/consumer/payment/nacos/1</p> <p>æˆ‘ä»¬å¯ä»¥å‘ç°å¯¹äºä¸¤ä¸ªproviderï¼Œæ˜¯è½®è¯¢è®¿é—®</p></blockquote> <blockquote><p>è¿™é‡Œå…¶å®å°±æ˜¯å¼•å…¥ä¸€ä¸ªè´Ÿè½½å‡è¡¡æ¥æµ‹è¯•æ³¨å†Œä¸­å¿ƒï¼Œ2021.1ç‰ˆæœ¬çš„nacosæœ¬èº«å·²ä¸å¸¦æœ‰è´Ÿè½½å‡è¡¡</p></blockquote> <h3 id="æ³¨å†Œä¸­å¿ƒå¯¹æ¯”"><a href="#æ³¨å†Œä¸­å¿ƒå¯¹æ¯”" class="header-anchor">#</a> æ³¨å†Œä¸­å¿ƒå¯¹æ¯”</h3> <blockquote><p>nacosæ”¯æŒCPã€APæ¨¡å‹çš„åˆ‡æ¢</p></blockquote> <p><img src="https://images.zaiolos.top/images/202211151857285.png" alt="image-20221115185730171"></p> <p>nacosä¸å…¶ä»–æ³¨å†Œä¸­å¿ƒç‰¹æ€§å¯¹æ¯”</p> <table><thead><tr><th></th> <th>Nacos</th> <th>Eureka</th> <th>Consul</th> <th>CoreDNS</th> <th>Zookeeper</th></tr></thead> <tbody><tr><td>ä¸€è‡´æ€§åè®®</td> <td>CPã€APå‡å¯</td> <td>AP</td> <td>CP</td> <td>/</td> <td>CP</td></tr> <tr><td>å¥åº·æ£€æŸ¥</td> <td>TCP/HTTP/MYSQL/Client Beat</td> <td>Client Beat</td> <td>TCP/HTTP/gRPC/Cmd</td> <td>/</td> <td>Client Beat</td></tr> <tr><td>è´Ÿè½½å‡è¡¡</td> <td>æƒé‡/DSL/metadata/CMDB</td> <td>Ribbon</td> <td>Fabio</td> <td>RR</td> <td>/</td></tr> <tr><td>é›ªå´©ä¿æŠ¤</td> <td>æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td></tr> <tr><td>è‡ªåŠ¨æ³¨é”€å®ä¾‹</td> <td>æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>æ”¯æŒ</td></tr> <tr><td>è®¿é—®åè®®</td> <td>HTTP/DNS/UDP</td> <td>HTTP</td> <td>HTTP/DNS</td> <td>DNS</td> <td>TCP</td></tr> <tr><td>ç›‘å¬æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>æ”¯æŒ</td></tr> <tr><td>å¤šæ•°æ®ä¸­å¿ƒ</td> <td>æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td></tr> <tr><td>è·¨æ³¨å†Œä¸­å¿ƒ</td> <td>æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td></tr> <tr><td>Spring Cloudé›†æˆ</td> <td>æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td></tr> <tr><td>Dubboé›†æˆ</td> <td>æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>æ”¯æŒ</td></tr> <tr><td>K8Sé›†æˆ</td> <td>æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>æ”¯æŒ</td> <td>ä¸æ”¯æŒ</td></tr></tbody></table> <h3 id="apã€cpåˆ‡æ¢"><a href="#apã€cpåˆ‡æ¢" class="header-anchor">#</a> APã€CPåˆ‡æ¢</h3> <p><strong>Cæ˜¯æ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶é—´çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„;è€ŒAçš„å®šä¹‰æ˜¯æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šæ”¶åˆ°å“åº”ã€‚</strong></p> <div class="custom-block tip"><p class="custom-block-title">ä½•æ—¶é€‰æ‹©ä½¿ç”¨ä½•ç§æ¨¡å¼ï¼Ÿ</p> <p>ä¸€èˆ¬æ¥è¯´ï¼Œ</p> <br> <p>å¦‚æœä¸éœ€è¦å­˜å‚¨æœåŠ¡çº§åˆ«çš„ä¿¡æ¯ä¸”æœåŠ¡å®ä¾‹æ˜¯é€šè¿‡racos-clientæ³¨å†Œï¼Œå¹¶èƒ½å¤Ÿä¿æŒå¿ƒè·³ä¸ŠæŠ¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€‰æ‹©APæ¨¡å¼ã€‚å½“å‰ä¸»æµçš„æœåŠ¡å¦‚Spring Cloudå’ŒDubbo æœåŠ¡ï¼Œéƒ½é€‚ç”¨äºAPæ¨¡å¼ï¼ŒAPæ¨¡å¼ä¸ºäº†æœåŠ¡çš„å¯èƒ½æ€§è€Œå‡å¼±äº†ä¸€è‡´æ€§ï¼Œå› æ­¤APæ¨¡å¼ä¸‹åªæ”¯æŒæ³¨å†Œä¸´æ—¶å®ä¾‹ã€‚</p> <br> <p>å¦‚æœéœ€è¦åœ¨æœåŠ¡çº§åˆ«ç¼–è¾‘æˆ–è€…å­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œé‚£ä¹ˆCPæ˜¯å¿…é¡»ï¼ŒK8SæœåŠ¡å’ŒDNSæœåŠ¡åˆ™é€‚ç”¨äºCPæ¨¡å¼ã€‚</p> <br> <p>CPæ¨¡å¼ä¸‹åˆ™æ”¯æŒæ³¨å†ŒæŒä¹…åŒ–å®ä¾‹ï¼Œæ­¤æ—¶åˆ™æ˜¯ä»¥Raftåè®®ä¸ºé›†ç¾¤è¿è¡Œæ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¸‹æ³¨å†Œå®ä¾‹ä¹‹å‰å¿…é¡»å…ˆæ³¨å†ŒæœåŠ¡ï¼Œå¦‚æœæœåŠ¡ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¿”å›é”™è¯¯ã€‚</p></div> <p>å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ä¿®æ”¹æ¨¡å¼</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-X</span> PUT <span class="token string">'$NACOS_SERVER:8848/nacos/v1/ns/operator/switches?entry=serverMode&amp;value=CP'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒæ¼”ç¤º"><a href="#nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒæ¼”ç¤º" class="header-anchor">#</a> Nacosä½œä¸ºæœåŠ¡é…ç½®ä¸­å¿ƒæ¼”ç¤º</h2> <h3 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="header-anchor">#</a> åŸºç¡€é…ç½®</h3> <p>æ–°å»º<code>cloudalibaba-config-nacos-client3377</code>æ¨¡å—</p> <h4 id="pom-3"><a href="#pom-3" class="header-anchor">#</a> pom</h4> <blockquote><p>ä¾èµ–ç›¸è¾ƒäºå‰é¢çš„æœåŠ¡æ³¨å†Œæ¨¡å—ï¼Œé™¤äº†ä¿ç•™discoveryå¤–ï¼Œè¿˜è¦æ–°å¢ä¸€ä¸ªconfigä¾èµ–</p></blockquote> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- nacos configä¾èµ– --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="yaml-3"><a href="#yaml-3" class="header-anchor">#</a> yaml</h4> <blockquote><p>è¿™é‡Œéœ€è¦ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯åŸæ¥çš„<code>application.yaml</code>ï¼Œå¦ä¸€ä¸ªæ˜¯<code>bootstrap.yaml</code>ã€‚</p> <p>NacosåŒSpringCloud-Configä¸€æ ·ï¼Œåœ¨é¡¹ç›®åˆå§‹åŒ–æ—¶ï¼Œè¦ä¿è¯å…ˆä»é…ç½®ä¸­å¿ƒè¿›è¡Œé…ç½®æ‹‰å–ï¼Œæ‹‰å–é…ç½®ä¹‹åï¼Œæ‰èƒ½ä¿è¯é¡¹ç›®çš„æ­£å¸¸å¯åŠ¨ã€‚
SpringBootä¸­é…ç½®æ–‡ä»¶çš„åŠ è½½æ˜¯å­˜åœ¨ä¼˜å…ˆçº§é¡ºåºçš„ï¼Œ<strong>bootstrapä¼˜å…ˆçº§é«˜äºapplication</strong></p></blockquote> <p>application.yaml</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev <span class="token comment"># è¡¨ç¤ºå¼€å‘ç¯å¢ƒ</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>bootstrap.yaml</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">3377</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>config<span class="token punctuation">-</span>client
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yaml <span class="token comment"># æŒ‡å®šåœ¨configServerä¸Šæ‰¾yamlæ ¼å¼çš„æ–‡ä»¶</span>

<span class="token comment"># ${spring.application.name}-${spring.profile.active}.${spring.cloud.nacos.config.file-extension}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="ä¸»å¯åŠ¨ç±»-2"><a href="#ä¸»å¯åŠ¨ç±»-2" class="header-anchor">#</a> ä¸»å¯åŠ¨ç±»</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NacosConfigClientMain3377</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">NacosConfigClientMain3377</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="controller-2"><a href="#controller-2" class="header-anchor">#</a> Controller</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RefreshScope</span> <span class="token comment">//æ”¯æŒnacosçš„åŠ¨æ€åˆ·æ–°</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigClientController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${config.info}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> configInfo<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/config/info&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getConfigInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> configInfo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="åœ¨nacosä¸­æ·»åŠ é…ç½®ä¿¡æ¯"><a href="#åœ¨nacosä¸­æ·»åŠ é…ç½®ä¿¡æ¯" class="header-anchor">#</a> åœ¨Nacosä¸­æ·»åŠ é…ç½®ä¿¡æ¯</h4> <h5 id="nacosä¸­çš„åŒ¹é…è§„åˆ™"><a href="#nacosä¸­çš„åŒ¹é…è§„åˆ™" class="header-anchor">#</a> Nacosä¸­çš„åŒ¹é…è§„åˆ™</h5> <ul><li>Nacosä¸­çš„DataIdçš„ç»„æˆæ ¼å¼ä»¥åŠä¸SpringBooté…ç½®æ–‡ä»¶ä¸­çš„åŒ¹é…è§„åˆ™</li></ul> <p>è¯´æ˜ï¼šä¹‹æ‰€ä»¥éœ€è¦é…ç½®<code>spring.application.name</code>ï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯æ„æˆNacosç®¡ç†é…ç½®<code>dataId</code>å­—æ®µçš„ä¸€éƒ¨åˆ†ã€‚</p> <p>åœ¨Nacos Spring Cloudä¸­ï¼Œ<code>dataId</code>çš„å®Œæ•´æ ¼å¼å¦‚ä¸‹</p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>#<span class="token punctuation">{</span>prefix<span class="token punctuation">}</span>-<span class="token equation string">${spring.profile.active}.$</span><span class="token punctuation">{</span>file-extension<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>prefix</code>é»˜è®¤ä¸º<code>spring.application.name</code>çš„å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®é¡¹<code>spring.cloud.nacos.config.prefix</code>æ¥é…ç½®</li> <li><code>spring.profile.active</code>å³ä¸ºå½“å‰ç¯å¢ƒå¯¹åº”çš„profileï¼Œè¯¦æƒ…å‚è€ƒSpring Bootæ–‡æ¡£ã€‚<strong>æ³¨æ„ï¼Œå½“<code>spring.profile.active</code>ä¸ºç©ºæ—¶ï¼Œå¯¹åº”çš„è¿æ¥ç¬¦-ä¹Ÿå°†ä¸å­˜åœ¨ï¼ŒdataIdçš„æ‹¼æ¥æ ¼å¼å˜ä¸º<code>#{prefix}.${file-extension}</code></strong></li> <li><code>file-extension</code>ä¸ºé…ç½®å†…å®¹çš„æ•°æ®æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡é…ç½®é¡¹<code>spring.cloud.nacos.config.file-extension</code>æ¥é…ç½®ï¼Œç›®å‰åªæ”¯æŒ<code>properties</code>å’Œ<code>yaml</code>ç±»å‹</li> <li>é€šè¿‡Spring CloudåŸç”Ÿæ³¨è§£<code>@RrefreshScope</code>å®ç°é…ç½®è‡ªåŠ¨æ›´æ–°</li></ul> <p><strong>æ‰€ä»¥æœ€åçš„å…¬å¼ï¼š</strong></p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code><span class="token equation string">${spring.application.name}-$</span><span class="token punctuation">{</span>spring.profiles.active<span class="token punctuation">}</span>.$<span class="token punctuation">{</span>spring.cloud.nacos.config.file-extension<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="åœ¨nacosè¿›è¡Œæ·»åŠ é…ç½®"><a href="#åœ¨nacosè¿›è¡Œæ·»åŠ é…ç½®" class="header-anchor">#</a> åœ¨nacosè¿›è¡Œæ·»åŠ é…ç½®</h5> <p><img src="https://images.zaiolos.top/images/202211161702662.png" alt="image-20221116170241590"></p> <p><img src="https://images.zaiolos.top/images/202211161703004.png" alt="image-20221116170335913"></p> <h5 id="æµ‹è¯•-2"><a href="#æµ‹è¯•-2" class="header-anchor">#</a> æµ‹è¯•</h5> <p>æ·»åŠ é…ç½®åï¼Œå¯åŠ¨3377é¡¹ç›®ä¼šå‘ç°å¯åŠ¨æŠ¥é”™ï¼Œè¿™ç¯‡æ–‡ç« æŒ‡å‡ºäº†åŸå› ï¼š</p> <p>https://blog.csdn.net/wyz0923/article/details/118303072ï¼Œå³cloud2020ç‰ˆæœ¬åï¼Œå·²ä¸ä¼šå†è‡ªåŠ¨å…ˆåŠ è½½<code>bootstrap.yaml</code>æ–‡ä»¶äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å’Œåœ¨Spring Cloud Configä¸­ä¸€æ ·ï¼Œæ‰‹åŠ¨æ·»åŠ ä¸Šbootstrapçš„ä¾èµ–</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-bootstrap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è°ƒç”¨æ¥å£è·å–é…ç½®æ–‡ä»¶æµ‹è¯•æ­£å¸¸</p> <p><img src="https://images.zaiolos.top/images/202211161720645.png" alt="image-20221116172040578"></p> <p><strong>åœ¨nacosæ§åˆ¶å°è¿›è¡Œé…ç½®ä¿®æ”¹ï¼Œç„¶åå†æ¬¡è·å–ï¼Œå‘ç°å·²ç«‹åˆ»åˆ·æ–°</strong></p> <p><img src="https://images.zaiolos.top/images/202211161722281.png" alt="image-20221116172254186"></p> <h3 id="åˆ†ç±»é…ç½®"><a href="#åˆ†ç±»é…ç½®" class="header-anchor">#</a> åˆ†ç±»é…ç½®</h3> <blockquote><p>ä¸ºäº†è§£å†³å¤§å‹å¾®æœåŠ¡é¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ªå­é¡¹ç›®ï¼Œä¸”æ¯ä¸ªå­é¡¹ç›®åˆæœ‰å¼€å‘ã€æµ‹è¯•ã€é¢„å‘å¸ƒã€æ­£å¼ç¯å¢ƒç­‰ç¯å¢ƒï¼Œæ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶éš¾ä»¥ç®¡ç†çš„é—®é¢˜ï¼ŒNacosçš„é…ç½®ä¸­å¿ƒé‡‡ç”¨<strong>Namespace+Group+DataId</strong>çš„è®¾è®¡</p></blockquote> <h4 id="ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡"><a href="#ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡" class="header-anchor">#</a> ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</h4> <blockquote><p>æ­¤è®¾è®¡ç±»ä¼¼äºjavaä¸­çš„æ¦‚å¿µï¼Œå³packageåå’Œç±»å</p> <p>æœ€å¤–å±‚çš„namespaceæ˜¯å¯ä»¥ç”¨äºåŒºåˆ†éƒ¨ç½²ç¯å¢ƒçš„ï¼ŒGroupå’ŒDataIdé€»è¾‘ä¸ŠåŒºåˆ†ä¸¤ä¸ªç›®æ ‡å¯¹è±¡</p></blockquote> <p>ä¸‰è€…æƒ…å†µï¼š</p> <p><img src="https://images.zaiolos.top/images/202211161732978.png" alt="image-20221116173241902"></p> <p><strong>é»˜è®¤æƒ…å†µä¸‹ï¼š</strong></p> <p><code>Namespace=publicï¼ŒGroup=DEFAULT_GROUPï¼Œé»˜è®¤Clusteræ˜¯DEFAULT</code></p> <blockquote><p>Nacosé»˜è®¤çš„å‘½åç©ºé—´æ˜¯publicï¼ŒNamespaceä¸»è¦ç”¨æ¥å®ç°éš”ç¦»ã€‚
æ¯”æ–¹è¯´æˆ‘ä»¬ç°åœ¨æœ‰ä¸‰ä¸ªç¯å¢ƒ:å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸‰ä¸ªNamespaceï¼Œä¸åŒçš„Namespaceä¹‹é—´æ˜¯éš”ç¦»çš„ã€‚</p> <br> <p>Groupé»˜è®¤æ˜¯DEFAULT_GROUPï¼ŒGroupå¯ä»¥æŠŠä¸åŒçš„å¾®æœåŠ¡åˆ’åˆ†åˆ°åŒä¸€ä¸ªåˆ†ç»„é‡Œé¢å»</p> <br> <p>Serviceå°±æ˜¯å¾®æœåŠ¡;ä¸€ä¸ªServiceå¯ä»¥åŒ…å«å¤šä¸ªCluster (é›†ç¾¤)ï¼ŒNacosé»˜è®¤Clusteræ˜¯DEFAULTï¼ŒClusteræ˜¯å¯¹æŒ‡å®šå¾®æœåŠ¡çš„ä¸€ä¸ªè™šæ‹Ÿåˆ’åˆ†ã€‚æ¯”æ–¹è¯´ä¸ºäº†å®¹ç¾ï¼Œå°†Serviceå¾®æœåŠ¡åˆ†åˆ«éƒ¨ç½²åœ¨äº†æ­å·æœºæˆ¿å’Œå¹¿å·æœºæˆ¿ï¼Œ
è¿™æ—¶å°±å¯ä»¥ç»™æ­å·æœºæˆ¿çš„Serviceå¾®æœåŠ¡èµ·ä¸€ä¸ªé›†ç¾¤åç§°(HZ) ï¼Œ
ç»™å¹¿å·æœºæˆ¿çš„Serviceå¾®æœåŠ¡èµ·ä¸€ä¸ªé›†ç¾¤åç§°(GZ)ï¼Œè¿˜å¯ä»¥å°½é‡è®©åŒä¸€ä¸ªæœºæˆ¿çš„å¾®æœåŠ¡äº’ç›¸è°ƒç”¨ï¼Œä»¥æå‡æ€§èƒ½ã€‚</p> <br> <p>æœ€åæ˜¯Instanceï¼Œå°±æ˜¯å¾®æœåŠ¡çš„å®ä¾‹ã€‚</p></blockquote> <h4 id="ä¸‰ç§æ–¹æ¡ˆåŠ è½½é…ç½®"><a href="#ä¸‰ç§æ–¹æ¡ˆåŠ è½½é…ç½®" class="header-anchor">#</a> ä¸‰ç§æ–¹æ¡ˆåŠ è½½é…ç½®</h4> <h5 id="dataidæ–¹æ¡ˆ"><a href="#dataidæ–¹æ¡ˆ" class="header-anchor">#</a> DataIdæ–¹æ¡ˆ</h5> <ul><li>æŒ‡å®šspring.profile.activeå’Œé…ç½®æ–‡ä»¶çš„DataIDæ¥ä½¿ä¸åŒç¯å¢ƒä¸‹è¯»å–ä¸åŒçš„é…ç½®</li> <li>é»˜è®¤ç©ºé—´+é»˜è®¤åˆ†ç»„+æ–°å»ºdevå’Œtestå•·ä¸ªDataID</li> <li>é€šè¿‡spring.profile.activeè®¾ä¸ºdevæˆ–testå®ç°å¤šç¯å¢ƒä¸‹é…ç½®æ–‡ä»¶çš„è¯»å–</li></ul> <p>ç”±äºå…ˆå‰å·²ç»æ–°å¢äº†devçš„é…ç½®æ–‡ä»¶ï¼Œç°åœ¨æ–°å¢ä¸€ä¸ªtestå³å¯</p> <p><img src="https://images.zaiolos.top/images/202211161743873.png" alt="image-20221116174327799"></p> <p>ä¿®æ”¹spring.profiles.activeä¸ºtestï¼Œè®¿é—®é…ç½®æµ‹è¯•æ¥å£ï¼šæˆåŠŸè·å–åˆ°</p> <p><img src="https://images.zaiolos.top/images/202211161747227.png" alt="image-20221116174712161"></p> <h5 id="groupæ–¹æ¡ˆ"><a href="#groupæ–¹æ¡ˆ" class="header-anchor">#</a> Groupæ–¹æ¡ˆ</h5> <p>æ–°å»ºä¸¤ä¸ªé…ç½®ï¼Œé…ç½®çš„DataIdéƒ½æ˜¯<code>nacos-config-client-info.yaml</code>ï¼Œä½†æ˜¯Groupä¸ç›¸åŒï¼Œä¸€ä¸ªæ˜¯<code>DEV_GROUP</code>ï¼Œä¸€ä¸ªæ˜¯<code>TEST_GROUP</code>ï¼Œå†…å®¹ä¸ºï¼š<strong>config:info:nacos-config-client-info.yaml,TEST(DEV)_GROUP</strong></p> <p><img src="https://images.zaiolos.top/images/202211161754892.png" alt="image-20221116175458797"></p> <blockquote><p>ç„¶åæ˜¯å¯¹bootstrap.yamlè¿›è¡Œé…ç½®ï¼Œåœ¨spring.cloud.nacos.configä¸‹å¢åŠ groupå±æ€§ï¼Œå€¼å³ä¸ºæ–°å»ºçš„é…ç½®çš„groupï¼Œç„¶åapplication.yamlçš„spring.profiles.activeæ”¹ä¸ºinfo</p></blockquote> <p><img src="https://images.zaiolos.top/images/202211161756276.png" alt="image-20221116175631203"></p> <p><strong>åœ¨ä¸åŒgroupä¸‹è¿›è¡Œè¿›è¡Œæµ‹è¯•ï¼š</strong></p> <p><img src="https://images.zaiolos.top/images/202211161759700.png" alt="image-20221116175953637"></p> <h5 id="namespaceæ–¹æ¡ˆ"><a href="#namespaceæ–¹æ¡ˆ" class="header-anchor">#</a> Namespaceæ–¹æ¡ˆ</h5> <p>é¦–å…ˆï¼Œæ–°å»ºå‘½åç©ºé—´</p> <p><img src="https://images.zaiolos.top/images/202211161808381.png" alt="image-20221116180812294"></p> <blockquote><p>ä½ç‰ˆæœ¬çš„nacosä¸­ï¼Œå‘½åç©ºé—´idæ˜¯ä¸èƒ½è‡ªå®šä¹‰çš„ï¼Œç›®å‰æˆ‘ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å…ˆç”¨å®ƒçš„è‡ªåŠ¨ç”Ÿæˆå³å¯</p></blockquote> <p>åˆ›å»ºå®Œå‘½åç©ºé—´åï¼Œå›åˆ°é…ç½®åˆ—è¡¨ï¼Œå¯ä»¥å‘ç°ï¼Œå¯ä»¥é€‰æ‹©æˆ‘ä»¬åˆšæ‰åˆ›å»ºå‘½åç©ºé—´äº†</p> <p><img src="https://images.zaiolos.top/images/202211161809579.png" alt="image-20221116180953484"></p> <p>åˆ‡æ¢ä»¥åä¼šå‘ç°æ²¡æœ‰é…ç½®</p> <p><img src="https://images.zaiolos.top/images/202211161810749.png" alt="image-20221116181013663"></p> <blockquote><p>è¿™ä¸ªæ—¶å€™å°±å¯ä»¥åˆ›å»ºé…ç½®äº†ï¼Œåœ¨å“ªä¸ªç©ºé—´ä¸‹åˆ›å»ºé…ç½®ï¼Œè¿™ä¸ªé…ç½®å°±æ˜¯å±äºè¿™ä¸ªå‘½åç©ºé—´çš„ï¼Œä¸å…¶ä»–å‘½åç©ºé—´æ˜¯éš”ç¦»çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸¤ä¸ªç¯å¢ƒéƒ½åˆ›å»ºä¸€ä¸ªé…ç½®</p></blockquote> <p><img src="https://images.zaiolos.top/images/202211161813996.png" alt="image-20221116181351892"></p> <p>å¦‚ä½•ä½¿å…¶èƒ½å¤Ÿè¢«è®¿é—®åˆ°ä¹Ÿå’Œgroupçš„é…ç½®å·®ä¸å¤šï¼š</p> <blockquote><p>å¯¹bootstrap.yamlè¿›è¡Œé…ç½®ï¼Œåœ¨spring.cloud.nacos.configä¸‹å¢åŠ namespaceå±æ€§ï¼Œ<strong>å€¼ä¸ºä¸Šé¢çš„å‘½åç©ºé—´ID</strong>ï¼Œè¿™æ ·å†ç»“åˆä¸Šé¢çš„groupé…ç½®ã€spring.profiles.activeé…ç½®ï¼Œå³å¯è®¿é—®é…ç½®æ–‡ä»¶ï¼Œå°±ä¸å†è¿›è¡Œæµ‹è¯•äº†</p></blockquote> <h2 id="nacosé›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®-é‡è¦"><a href="#nacosé›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®-é‡è¦" class="header-anchor">#</a> Nacosé›†ç¾¤å’ŒæŒä¹…åŒ–é…ç½®(é‡è¦)</h2> <blockquote><p>é»˜è®¤Nacosä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“å®ç°æ•°æ®çš„å­˜å‚¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœå¯åŠ¨å¤šä¸ªé»˜è®¤é…ç½®ä¸‹çš„NacosèŠ‚ç‚¹ï¼Œæ•°æ®å­˜å‚¨æ˜¯å­˜åœ¨ä¸€è‡´æ€§é—®é¢˜çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒNacosé‡‡ç”¨äº†<strong>é›†ä¸­å¼å­˜å‚¨çš„æ–¹å¼æ¥æ”¯æŒé›†ç¾¤åŒ–éƒ¨ç½²ï¼Œç›®å‰åªæ”¯æŒMySQLçš„å­˜å‚¨</strong>ã€‚</p></blockquote> <h3 id="å°†å•ä½“nacosæ•°æ®åº“è¿ç§»åˆ°mysql"><a href="#å°†å•ä½“nacosæ•°æ®åº“è¿ç§»åˆ°mysql" class="header-anchor">#</a> å°†å•ä½“Nacosæ•°æ®åº“è¿ç§»åˆ°MySQL</h3> <p>æ­¥éª¤ï¼š</p> <ol><li><p>é¦–å…ˆå…ˆåœ¨MySQLä¸­åˆ›å»ºåä¸º<code>nacos_config</code>çš„æ•°æ®åº“</p></li> <li><p>ç„¶åå¯¼å…¥nacos/conf/mysql-schema.sqlæ–‡ä»¶</p></li> <li><p>ç„¶åæ‰¾åˆ°application.propertiesæ–‡ä»¶ï¼Œåœ¨æœ€åå¢åŠ ä»¥ä¸‹å†…å®¹</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring.datasource.platform</span><span class="token punctuation">=</span><span class="token value attr-value">mysql</span>
<span class="token key attr-name">db.num</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
<span class="token key attr-name">db.url.0</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/nacos_config?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=GMT%2B8</span>
<span class="token key attr-name">db.user.0</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">db.password.0</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>ç„¶åé‡æ–°è¿è¡Œnacosï¼Œå¯ä»¥å‘ç°æˆ‘ä»¬ä¹‹å‰æ–°å»ºçš„é…ç½®å…¨éƒ¨æ¶ˆå¤±äº†ï¼Œè¯´æ˜åˆ‡æ¢æˆåŠŸ</p></li></ol> <blockquote><p>å¯ä»¥è¿›è¡Œæµ‹è¯•ï¼Œç°åœ¨æ–°å¢ä¸€æ¡é…ç½®ï¼Œçœ‹çœ‹MySQLä¸­çš„æ•°æ®æƒ…å†µ</p></blockquote> <p><img src="https://images.zaiolos.top/images/202211181456066.png" alt="image-20221118145643954"></p> <h3 id="linuxç‰ˆnacos-mysqlç”Ÿäº§ç¯å¢ƒé…ç½®"><a href="#linuxç‰ˆnacos-mysqlç”Ÿäº§ç¯å¢ƒé…ç½®" class="header-anchor">#</a> Linuxç‰ˆNacos+MySQLç”Ÿäº§ç¯å¢ƒé…ç½®</h3> <blockquote><p>é¢„è®¡éœ€è¦ï¼šä¸€ä¸ªnginx+3ä¸ªnacosæ³¨å†Œä¸­å¿ƒ(å› ä¸ºè¦3ä¸ªæˆ–ä»¥ä¸ŠnacosèŠ‚ç‚¹æ‰èƒ½æ„æˆé›†ç¾¤)+1ä¸€ä¸ªMySQL</p></blockquote> <p>Linuxç‰ˆnacos serverçš„åŒ…(<code>tar.gz</code>åç¼€)çš„ä¸‹è½½èµ˜è¿°ï¼Œä¸‹é¢ç›´æ¥åˆ°é›†ç¾¤é…ç½®æ­¥éª¤</p> <h4 id="linuxå®‰è£…æ­¥éª¤"><a href="#linuxå®‰è£…æ­¥éª¤" class="header-anchor">#</a> Linuxå®‰è£…æ­¥éª¤</h4> <ul><li><p>é¦–å…ˆå°†å®‰è£…åŒ…ä¸Šä¼ åˆ°LinuxæœåŠ¡å™¨ï¼Œæˆ‘è¿™é‡Œæ˜¯<code>/usr/local/software/nacos/applicaion</code>ï¼Œç›®å½•</p></li> <li><p>è¿è¡Œå‘½ä»¤è§£å‹</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> nacos-server-2.1.2.tar.gz
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p><img src="https://images.zaiolos.top/images/202211181505498.png" alt="image-20221118150537412"></p> <p>åŒçº§ç›®å½•ä¸‹å°±ä¼šå‡ºç°ä¸€ä¸ªåä¸ºnacosçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢çš„å†…å®¹å’Œæˆ‘ä»¬åœ¨winé‡Œé¢æµ‹è¯•æ—¶çš„ä¸€æ ·</p> <h4 id="é›†ç¾¤é…ç½®æ­¥éª¤-é‡ç‚¹"><a href="#é›†ç¾¤é…ç½®æ­¥éª¤-é‡ç‚¹" class="header-anchor">#</a> é›†ç¾¤é…ç½®æ­¥éª¤(é‡ç‚¹)</h4> <h5 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySQL</h5> <blockquote><p>é¦–å…ˆæ˜¯MySQLçš„å‡†å¤‡ï¼Œç”±äºæˆ‘è™šæ‹Ÿæœºä¸Šçš„MySQLè¿˜æ˜¯5.1çš„ç‰ˆæœ¬ï¼Œè¿™é‡Œå°±ç›´æ¥ä½¿ç”¨æœ¬æœºä¸Šçš„MySQLï¼Œæ­¥éª¤å’Œä¸Šé¢ä¸€æ ·ï¼Œæ”¹ä¸€ä¸‹<code>application.properties</code></p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring.datasource.platform</span><span class="token punctuation">=</span><span class="token value attr-value">mysql</span>
<span class="token key attr-name">db.num</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
<span class="token comment"># è¿™é‡Œæ³¨æ„ipæ”¹ä¸€ä¸‹å°±è¡Œ</span>
<span class="token key attr-name">db.url.0</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://192.168.0.110:3306/nacos_config?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=GMT%2B8</span>
<span class="token key attr-name">db.user.0</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">db.password.0</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></blockquote> <p>è¿™é‡Œå¯åŠ¨nacosè¿˜é‡åˆ°é—®é¢˜ï¼Œå³<code>No Datasource set</code>ï¼ŒåŸå› æ˜¯æˆ‘è¿™é‡Œæ˜¯è™šæ‹Ÿæœºè¿æ¥æœ¬æœºçš„MySQLï¼Œè€Œæœ¬æœºMySQLæ²¡æœ‰è®¾ç½®è¿œç¨‹è¿æ¥çš„æƒé™ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ä¸€ä¸‹ï¼Œè®¾ç½®å¥½ä»¥åé‡æ–°è¿æ¥ä¸€ä¸‹å³å¯</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code># ä»¥ä¸‹å‘½ä»¤é€‚ç”¨äºMySQL8.0+
USE mysql;  #ä¸€å®šè¦ä½¿ç”¨mysqlè¡¨ï¼Œå› ä¸ºæˆæƒåªèƒ½åœ¨è¿™ä¸ªè¡¨é‡Œæˆæƒã€‚
select host,user from user; #æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„æƒé™è¡¨
update user set host='%' where user='root'; #ä¿®æ”¹æƒé™
flush privileges; # åˆ·æ–°æƒé™

# å¦‚æœæ˜¯8.0ä»¥ä¸‹ï¼Œä½¿ç”¨ä»¥ä¸‹è¯­å¥
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'root' WITH GRANT OPTION;

All : è¡¨ç¤ºæ‰€æœ‰æ“ä½œï¼Œæ¯”å¦‚select,update,insertç­‰æ“ä½œ
*.* ï¼šè¡¨ç¤ºæ‰€æœ‰åº“çš„æ‰€æœ‰è¡¨ï¼ˆtest.*åˆ™è¡¨ç¤ºteståº“çš„æ‰€æœ‰è¡¨ï¼‰ã€‚
root ï¼šè¡¨ç¤ºæˆæƒçš„ç”¨æˆ·åã€‚
% ï¼šè¡¨ç¤ºå¯ä»¥ä»ä»»æ„åœ°æ–¹ç™»å½•ï¼Œå¦‚æ”¹æˆ192.168.0.999ï¼Œåˆ™è¡¨ç¤ºåªèƒ½ä»ipåœ°å€ä¸º192.168.0.999çš„æœºå™¨ç™»å½•
123456 ï¼šè¡¨ç¤ºæˆæƒçš„ç”¨æˆ·åçš„å¯†ç ã€‚

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h5 id="cluster-conf"><a href="#cluster-conf" class="header-anchor">#</a> cluster.conf</h5> <blockquote><p>è¿™é‡Œè¦å¢åŠ nacosçš„é›†ç¾¤é…ç½®æ–‡ä»¶ <code>cluster.conf</code></p></blockquote> <p><img src="https://images.zaiolos.top/images/202211181543533.png" alt="image-20221118154341456"></p> <blockquote><p>å¯ä»¥çœ‹åˆ°confæ–‡ä»¶å¤¹é‡Œæœ‰ä¸€ä¸ªcluster.conf.exampleæ–‡ä»¶ï¼Œæˆ‘ä»¬å°†å®ƒcopyä¸€ä»½ï¼Œåä¸ºcluster.conf</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">cp</span> cluster.conf.example cluster.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <p>ç¼–è¾‘<code>cluster.conf</code>çš„å†…å®¹ï¼š</p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>192.168.0.112:3333
192.168.0.112:4444
192.168.0.112:5555
# ipæ˜¯è™šæ‹Ÿæœºçš„ip  åé¢çš„æ˜¯nacoså®ä¾‹çš„ç«¯å£
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>æ³¨æ„ï¼šè¿™ä¸ªipä¸èƒ½æ˜¯127.0.0.1ï¼Œå¿…é¡»æ˜¯Linuxå‘½ä»¤<code>hostname -I</code>èƒ½å¤Ÿè¯†åˆ«çš„ip,æ‰§è¡Œè¿™ä¸ªå‘½ä»¤åå‡ºç°çš„ç¬¬ä¸€ä¸ªipå³æ˜¯è¦å¡«çš„ip</p></blockquote> <p>åˆ°è¿™é‡Œcluster.confå·²å®Œæˆ</p> <h5 id="startup-shè„šæœ¬"><a href="#startup-shè„šæœ¬" class="header-anchor">#</a> startup.shè„šæœ¬</h5> <blockquote><p>è¿™ä¸€æ­¥éœ€è¦ç¼–è¾‘nacosçš„å¯åŠ¨è„šæœ¬<code>startup.sh</code>ï¼Œä½¿å®ƒèƒ½å¤Ÿæ¥å—ä¸åŒçš„å¯åŠ¨ç«¯å£</p></blockquote> <blockquote><p>é›†ç¾¤å¯åŠ¨ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥ç±»ä¼¼å…¶å®ƒè½¯ä»¶çš„shellå‘½ä»¤ï¼Œä¼ é€’ä¸åŒçš„ç«¯å£å·å¯åŠ¨ä¸åŒçš„nacoså®ä¾‹ã€‚
å‘½ä»¤: bash startup.sh -p 3333è¡¨ç¤ºå¯åŠ¨ç«¯å£å·ä¸º3333çš„nacosæœåŠ¡å™¨å®ä¾‹ï¼Œå’Œä¸Šä¸€æ­¥çš„cluster.confé…ç½®çš„ä¸€è‡´ã€‚</p></blockquote> <p><img src="https://images.zaiolos.top/images/202211181611644.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> <p><img src="https://images.zaiolos.top/images/202211181611082.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># Copyright 1999-2018 Alibaba Group Holding Ltd.</span>
<span class="token comment"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="token comment"># you may not use this file except in compliance with the License.</span>
<span class="token comment"># You may obtain a copy of the License at</span>

<span class="token comment">#      http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="token comment">#</span>
<span class="token comment"># Unless required by applicable law or agreed to in writing, software</span>
<span class="token comment"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="token comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="token comment"># See the License for the specific language governing permissions and</span>
<span class="token comment"># limitations under the License.</span>

<span class="token assign-left variable">cygwin</span><span class="token operator">=</span>false
<span class="token assign-left variable">darwin</span><span class="token operator">=</span>false
<span class="token assign-left variable">os400</span><span class="token operator">=</span>false
<span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span><span class="token variable">`</span></span>&quot;</span> <span class="token keyword">in</span>
CYGWIN*<span class="token punctuation">)</span> <span class="token assign-left variable">cygwin</span><span class="token operator">=</span>true<span class="token punctuation">;</span><span class="token punctuation">;</span>
Darwin*<span class="token punctuation">)</span> <span class="token assign-left variable">darwin</span><span class="token operator">=</span>true<span class="token punctuation">;</span><span class="token punctuation">;</span>
OS400*<span class="token punctuation">)</span> <span class="token assign-left variable">os400</span><span class="token operator">=</span>true<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
<span class="token function-name function">error_exit</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;ERROR: <span class="token variable">$1</span> !!&quot;</span>
    <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable">$JAVA_HOME</span>/bin/java&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span><span class="token environment constant">$HOME</span>/jdk/java
<span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable">$JAVA_HOME</span>/bin/java&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/java
<span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable">$JAVA_HOME</span>/bin/java&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/opt/taobao/java
<span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable">$JAVA_HOME</span>/bin/java&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">unset</span> JAVA_HOME

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$JAVA_HOME</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token variable">$darwin</span><span class="token punctuation">;</span> <span class="token keyword">then</span>

    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-x</span> <span class="token string">'/usr/libexec/java_home'</span> <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>/usr/libexec/java_home<span class="token variable">`</span></span>

    <span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span><span class="token string">&quot;/System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home&quot;</span>
    <span class="token keyword">fi</span>
  <span class="token keyword">else</span>
    <span class="token assign-left variable">JAVA_PATH</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">dirname</span> <span class="token punctuation">$(</span>readlink <span class="token parameter variable">-f</span> <span class="token punctuation">$(</span>which javac<span class="token punctuation">))</span><span class="token variable">`</span></span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;x<span class="token variable">$JAVA_PATH</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;x&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">dirname</span> $JAVA_PATH <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null<span class="token variable">`</span></span>
    <span class="token keyword">fi</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$JAVA_HOME</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        error_exit <span class="token string">&quot;Please set the JAVA_HOME variable in your environment, We need java(x64)! jdk8 or later is better!&quot;</span>
  <span class="token keyword">fi</span>
<span class="token keyword">fi</span>

<span class="token builtin class-name">export</span> <span class="token assign-left variable">SERVER</span><span class="token operator">=</span><span class="token string">&quot;nacos-server&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">MODE</span><span class="token operator">=</span><span class="token string">&quot;cluster&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">FUNCTION_MODE</span><span class="token operator">=</span><span class="token string">&quot;all&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">MEMBER_LIST</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">EMBEDDED_STORAGE</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token keyword">while</span> <span class="token builtin class-name">getopts</span> <span class="token string">&quot;:m:f:s:c:p:o:&quot;</span> opt
<span class="token keyword">do</span>
    <span class="token keyword">case</span> <span class="token variable">$opt</span> <span class="token keyword">in</span>
        m<span class="token punctuation">)</span>
            <span class="token assign-left variable">MODE</span><span class="token operator">=</span><span class="token variable">$OPTARG</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        f<span class="token punctuation">)</span>
            <span class="token assign-left variable">FUNCTION_MODE</span><span class="token operator">=</span><span class="token variable">$OPTARG</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        s<span class="token punctuation">)</span>
            <span class="token assign-left variable">SERVER</span><span class="token operator">=</span><span class="token variable">$OPTARG</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        c<span class="token punctuation">)</span>
            <span class="token assign-left variable">MEMBER_LIST</span><span class="token operator">=</span><span class="token variable">$OPTARG</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        p<span class="token punctuation">)</span>
            <span class="token assign-left variable">EMBEDDED_STORAGE</span><span class="token operator">=</span><span class="token variable">$OPTARG</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        o<span class="token punctuation">)</span>  
			<span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token variable">$OPTARG</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
		?<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;Unknown parameter&quot;</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">export</span> JAVA_HOME
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$JAVA_HOME</span>/bin/java&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">BASE_DIR</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname $0<span class="token punctuation">)</span>/<span class="token punctuation">..</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CUSTOM_SEARCH_LOCATIONS</span><span class="token operator">=</span>file:<span class="token variable">${BASE_DIR}</span>/conf/

<span class="token comment">#===========================================================================================</span>
<span class="token comment"># JVM Configuration</span>
<span class="token comment">#===========================================================================================</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${MODE}</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;standalone&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -Xms512m -Xmx512m -Xmn256m&quot;</span>
    <span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -Dnacos.standalone=true&quot;</span>
<span class="token keyword">else</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${EMBEDDED_STORAGE}</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;embedded&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -DembeddedStorage=true&quot;</span>
    <span class="token keyword">fi</span>
    <span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -server -Xms2g -Xmx2g -Xmn1g -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span>
    <span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -XX:-OmitStackTraceInFastThrow -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=<span class="token variable">${BASE_DIR}</span>/logs/java_heapdump.hprof&quot;</span>
    <span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -XX:-UseLargePages&quot;</span>

<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${FUNCTION_MODE}</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;config&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -Dnacos.functionMode=config&quot;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${FUNCTION_MODE}</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;naming&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -Dnacos.functionMode=naming&quot;</span>
<span class="token keyword">fi</span>

<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -Dnacos.member.list=<span class="token variable">${MEMBER_LIST}</span>&quot;</span>

<span class="token assign-left variable">JAVA_MAJOR_VERSION</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>$JAVA <span class="token parameter variable">-version</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-E</span> <span class="token parameter variable">-n</span> <span class="token string">'s/.* version &quot;([0-9]*).*$/\1/p'</span><span class="token variable">)</span></span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$JAVA_MAJOR_VERSION</span>&quot;</span> <span class="token parameter variable">-ge</span> <span class="token string">&quot;9&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -Xlog:gc*:file=<span class="token variable">${BASE_DIR}</span>/logs/nacos_gc.log:time,tags:filecount=10,filesize=102400&quot;</span>
<span class="token keyword">else</span>
  <span class="token assign-left variable">JAVA_OPT_EXT_FIX</span><span class="token operator">=</span><span class="token string">&quot;-Djava.ext.dirs=<span class="token variable">${JAVA_HOME}</span>/jre/lib/ext:<span class="token variable">${JAVA_HOME}</span>/lib/ext&quot;</span>
  <span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -Xloggc:<span class="token variable">${BASE_DIR}</span>/logs/nacos_gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=100M&quot;</span>
<span class="token keyword">fi</span>

<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -Dloader.path=<span class="token variable">${BASE_DIR}</span>/plugins,<span class="token variable">${BASE_DIR}</span>/plugins/health,<span class="token variable">${BASE_DIR}</span>/plugins/cmdb,<span class="token variable">${BASE_DIR}</span>/plugins/selector&quot;</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -Dnacos.home=<span class="token variable">${BASE_DIR}</span>&quot;</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> -jar <span class="token variable">${BASE_DIR}</span>/target/<span class="token variable">${SERVER}</span>.jar&quot;</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> <span class="token variable">${JAVA_OPT_EXT}</span>&quot;</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> --spring.config.additional-location=<span class="token variable">${CUSTOM_SEARCH_LOCATIONS}</span>&quot;</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> --logging.config=<span class="token variable">${BASE_DIR}</span>/conf/nacos-logback.xml&quot;</span>
<span class="token assign-left variable">JAVA_OPT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${JAVA_OPT}</span> --server.max-http-header-size=524288&quot;</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">${BASE_DIR}</span>/logs&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">mkdir</span> <span class="token variable">${BASE_DIR}</span>/logs
<span class="token keyword">fi</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$JAVA</span> <span class="token variable">$JAVA_OPT_EXT_FIX</span> <span class="token variable">${JAVA_OPT}</span>&quot;</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">${MODE}</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;standalone&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;nacos is starting with standalone&quot;</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;nacos is starting with cluster&quot;</span>
<span class="token keyword">fi</span>

<span class="token comment"># check the start.out log output file</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;<span class="token variable">${BASE_DIR}</span>/logs/start.out&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">touch</span> <span class="token string">&quot;<span class="token variable">${BASE_DIR}</span>/logs/start.out&quot;</span>
<span class="token keyword">fi</span>
<span class="token comment"># start</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$JAVA</span> <span class="token variable">$JAVA_OPT_EXT_FIX</span> <span class="token variable">${JAVA_OPT}</span>&quot;</span> <span class="token operator">&gt;</span> <span class="token variable">${BASE_DIR}</span>/logs/start.out <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$JAVA_OPT_EXT_FIX</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">nohup</span> <span class="token string">&quot;<span class="token variable">$JAVA</span>&quot;</span> <span class="token parameter variable">-Dserver.port</span><span class="token operator">=</span><span class="token variable">${PORT}</span>  <span class="token variable">${JAVA_OPT}</span> nacos.nacos <span class="token operator">&gt;&gt;</span> <span class="token variable">${BASE_DIR}</span>/logs/start.out <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
<span class="token keyword">else</span>
  <span class="token function">nohup</span> <span class="token string">&quot;<span class="token variable">$JAVA</span>&quot;</span> <span class="token parameter variable">-Dserver.port</span><span class="token operator">=</span><span class="token variable">${PORT}</span>  <span class="token string">&quot;<span class="token variable">$JAVA_OPT_EXT_FIX</span>&quot;</span> <span class="token variable">${JAVA_OPT}</span> nacos.nacos <span class="token operator">&gt;&gt;</span> <span class="token variable">${BASE_DIR}</span>/logs/start.out <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
<span class="token keyword">fi</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;nacos is startingï¼Œyou can check the <span class="token variable">${BASE_DIR}</span>/logs/start.out&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br></div></div><blockquote><p>è¿™é‡Œç»è¿‡å°è¯• æ— è®ºæ€ä¹ˆéƒ½åªèƒ½å¯åŠ¨ä¸€ä¸ªç«¯å£çš„å®ä¾‹ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥å†æ‹·è´ä¸¤ä¸ªnacosï¼Œåˆ†åˆ«å¯åŠ¨startup.shæ¥å¯åŠ¨é›†ç¾¤</p></blockquote> <p><img src="https://images.zaiolos.top/images/202211181653441.png" alt="image-20221118165325245"></p> <p>è¿™æ˜¯<code>startcluster.sh</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">bash</span> /usr/local/software/nacos/application/nacos/bin/startup.sh <span class="token parameter variable">-o</span> <span class="token number">3333</span>
<span class="token function">bash</span> /usr/local/software/nacos/application/nacos4444/bin/startup.sh <span class="token parameter variable">-o</span> <span class="token number">4444</span>
<span class="token function">bash</span> /usr/local/software/nacos/application/nacos5555/bin/startup.sh <span class="token parameter variable">-o</span> <span class="token number">5555</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>è¿™é‡Œè¿˜æ˜¯éœ€è¦å°†startup.shä¿®æ”¹ä¸ºèƒ½å¤ŸæŒ‡å®šç«¯å£å¯åŠ¨åï¼Œå†copyå‡ºæ¥</p></blockquote> <p>è¿™æ˜¯<code>shutdowncluster.sh</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">bash</span> /usr/local/software/nacos/application/nacos/bin/shutdown.sh
<span class="token function">bash</span> /usr/local/software/nacos/application/nacos4444/bin/shutdown.sh
<span class="token function">bash</span> /usr/local/software/nacos/application/nacos5555/bin/shutdown.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ‰§è¡Œstartcluster.shåï¼Œè¿›å…¥ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„consoleå¯ä»¥çœ‹åˆ°é›†ç¾¤èŠ‚ç‚¹æƒ…å†µ</p> <p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>ps -ef|grep nacos|grep -v grep | wc -l</code>å‘½ä»¤è·å–nacosçš„æ•°é‡æ¥æŸ¥çœ‹</p> <p><img src="https://images.zaiolos.top/images/202211181709858.png" alt="image-20221118170934651"></p> <h5 id="nginxé…ç½®"><a href="#nginxé…ç½®" class="header-anchor">#</a> nginxé…ç½®</h5> <blockquote><p>ç¼–è¾‘nginxçš„é…ç½®ï¼Œç”±å®ƒä½œä¸ºè´Ÿè½½å‡è¡¡å™¨</p></blockquote> <ul><li><p>ä¸‹è½½nginx</p></li> <li><p>å‹è§£<code>tar -zxvf xxx.tar.gzr</code></p></li> <li><p>å®‰è£…gccç¯å¢ƒ<code>yum install gcc-c++</code></p></li> <li><p>å®‰è£…pcre pcre-devel <code>yum install pcre pcre-devel</code></p></li> <li><p>å®‰è£…zlib <code>yum install zlib zlib-devel</code></p></li> <li><p>å®‰è£…openssl <code>yum install -y openssl openssl-devel</code></p></li> <li><p>ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œåœ¨nginxæ ¹ç›®å½•ä¸‹æ‰§è¡Œ3ä¸ªå‘½ä»¤</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>./configure
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>æŸ¥æ‰¾nginxå®‰è£…ç›®å½• <code>whereis nginx</code>- /usr/local/nginx</p> <p><img src="https://images.zaiolos.top/images/202211181745129.png" alt="image-20221118174540927"></p></li></ul> <p>ç°åœ¨æ¥ä¿®æ”¹nginxé…ç½®æ–‡ä»¶ï¼š</p> <p><img src="https://images.zaiolos.top/images/202211181749541.png" alt="image-20221118174940321"></p> <div class="language-tex line-numbers-mode"><pre class="language-tex"><code>	upstream cluster<span class="token punctuation">{</span>
        server 127.0.0.1:3333;
        server 127.0.0.1:4444;
        server 127.0.0.1:5555;
    <span class="token punctuation">}</span>

    server <span class="token punctuation">{</span>
        listen       1111;
        server_name  localhost;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / <span class="token punctuation">{</span>
            #root   html;
            #index  index.html index.htm;
            proxy_pass http://cluster;
        <span class="token punctuation">}</span>

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html <span class="token punctuation">{</span>
            root   html;
        <span class="token punctuation">}</span>

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ <span class="token function selector">\.</span>php<span class="token equation string">$ {
        #    proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ <span class="token equation-command regex">\.</span>php$</span> <span class="token punctuation">{</span>
        #    root           html;
        #    fastcgi_pass   127.0.0.1:9000;
        #    fastcgi_index  index.php;
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
        #    include        fastcgi_params;
        #<span class="token punctuation">}</span>

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /<span class="token function selector">\.</span>ht <span class="token punctuation">{</span>
        #    deny  all;
        #<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><blockquote><p>ä¸»è¦æ˜¯æ·»åŠ upstreamï¼Œå…¶ä¸­åŒ…å«ä¸‰ä¸ªnacoså®ä¾‹çš„ip:ç«¯å£ï¼›</p> <p>ç„¶åæ˜¯ä¿®æ”¹serverç›‘å¬çš„ç«¯å£ä¸º1111ï¼Œä¸”ä¿®æ”¹location</p> <p>location / {
proxy_pass http://cluster;
}</p></blockquote> <p>æœ€åå¯åŠ¨nginxï¼š</p> <ul><li>è¿›å…¥/usr/local/nginx/sbinç›®å½•ï¼Œè¿è¡Œå‘½ä»¤<code>./nginx -c /usr/local/nginx/conf/nginx.conf</code></li></ul> <h4 id="æµ‹è¯•-3"><a href="#æµ‹è¯•-3" class="header-anchor">#</a> æµ‹è¯•</h4> <blockquote><p>åˆ°è¿™é‡Œï¼Œ3ä¸ªnacoså®ä¾‹å’Œnginxå‡å·²å¯åŠ¨ï¼Œæˆ‘ä»¬é€šè¿‡nginx(1111ç«¯å£)æ¥è®¿é—®nacosè¿›è¡Œæµ‹è¯•</p></blockquote> <p>è®¿é—®ï¼š<code>http://192.168.0.112:1111/nacos</code>ï¼Œå‘ç°æ˜¯å¯ä»¥è¿›å…¥åˆ°çš„</p> <p><img src="https://images.zaiolos.top/images/202211181758652.png" alt="image-20221118175837414"></p> <p>ç„¶åæ–°å¢ä¸€ä¸ªé…ç½®è¿›è¡Œæµ‹è¯•</p> <p><img src="https://images.zaiolos.top/images/202211181801396.png" alt="image-20221118180158243"></p> <h5 id="æµ‹è¯•æ³¨å†ŒåŠŸèƒ½"><a href="#æµ‹è¯•æ³¨å†ŒåŠŸèƒ½" class="header-anchor">#</a> æµ‹è¯•æ³¨å†ŒåŠŸèƒ½</h5> <blockquote><p>å°†9002paymentæœåŠ¡æ³¨å†Œè¿›nacosé›†ç¾¤è¿›è¡Œæµ‹è¯•ï¼š<code>server-addr: 192.168.0.112:1111</code> # nginxæš´éœ²</p></blockquote> <p>å¯åŠ¨9002ï¼ŒæŸ¥çœ‹æ§åˆ¶å°</p> <p><img src="https://images.zaiolos.top/images/202211181806009.png" alt="image-20221118180610732"></p> <h5 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h5> <p><img src="https://images.zaiolos.top/images/202211181807903.png" alt="image-20221118180701779"></p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/hnistzdk/my-notes/edit/master/docs/04.æ¡†æ¶/22.SpringCloud/12.Nacos.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/my-notes/tags/?tag=Nacos" title="æ ‡ç­¾">#Nacos</a><a href="/my-notes/tags/?tag=SpringCloud%20Alibaba" title="æ ‡ç­¾">#SpringCloud Alibaba</a></div> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°:</span> <span class="time">2022/11/18, 10:11:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/my-notes/SpringCloud/Sleuth/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Sleuth</div></a> <a href="/my-notes/SpringCloud/Sentinel/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Sentinel</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/my-notes/SpringCloud/Sleuth/" class="prev">Sleuth</a></span> <span class="next"><a href="/my-notes/SpringCloud/Sentinel/">Sentinel</a>â†’
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:369365576@qq.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/hnistzdk" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/hnistzdk" title="GitHub" target="_blank" class="iconfont icon-gitee"></a><a href="http://music.163.com/playlist?id=936642760&amp;userid=604011130" title="æ™®é€šæ­Œå•" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2022-2023
    <span>zdk | notes <br><a href=http://beian.miit.gov.cn/>æ¹˜ICPå¤‡2022001117å·-1</a><br><img src=/img/ghs.png /><a href=http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=51142102511562>å·å…¬ç½‘å®‰å¤‡ 51142102511562å·</a><br><a href=https://www.upyun.com/?utm_source=lianmeng&amp;utm_medium=referra><img src=/img/upyun.png align=absmiddle width=70px height=30px /></a> <span> æä¾›åŠ é€ŸæœåŠ¡ </span></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div id="goTop" class="hide-cat" data-v-bf92849a></div><div></div><div></div></div></div>
    <script src="/my-notes/assets/js/app.7f931ee0.js" defer></script><script src="/my-notes/assets/js/2.e52a17f8.js" defer></script><script src="/my-notes/assets/js/139.068ed7d7.js" defer></script><script src="/my-notes/assets/js/8.c2fa6f68.js" defer></script><script src="/my-notes/assets/js/6.bcc16901.js" defer></script>
  </body>
</html>
